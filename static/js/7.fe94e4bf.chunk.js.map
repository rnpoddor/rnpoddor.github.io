{"version":3,"sources":["components/PushUtils/Progress.js","components/PushUtils/index.js","components/PushUtils/UtilsRouter.js","components/PushUtils/connect.js","components/PushUtils/styles.js","components/PushUtils/Download.js","components/PushUtils/Inbox.js","components/PushUtils/Share.js","../node_modules/material-ui/Checkbox/index.js","../node_modules/material-ui/Checkbox/Checkbox.js","../node_modules/material-ui/internal/svg-icons/CheckBoxOutlineBlank.js","../node_modules/material-ui/internal/svg-icons/CheckBox.js","../node_modules/material-ui/internal/svg-icons/IndeterminateCheckBox.js","components/PushUtils/Templates.js"],"names":["Progress","props","context","on_index","info","setState","step","index","progress","completed","state","buffer","diff","Math","random","diff2","error","docs","prods","timer","$p","adapters","pouch","local","remote","authorized","doc","setInterval","init","clearInterval","keys","allDocs","then","rows","rdoc","value","some","key","id","rev","_id","_rev","push","ldoc","length","include_docs","attachments","bulkDocs","filter","v","map","new_edits","production","row","characteristic","utils","blank","guid","Promise","all","res","difs","dif","reduce","sum","_attachments","resolve","on","rebuild_indexes","off","setTimeout","handleCancel","flexGrow","propTypes","PropTypes","func","isRequired","UtilsRouter","handleOk","handleCalck","bind","err","title","Component","dialog","cmd","catch","message","classes","paper","renderContent","object","handlers","connect","mapStateToProps","handleIfaceState","component","name","handleOpen","ref","handleNavigate","replace","compose","styles","minWidth","maxHeight","entered","minHeight","secondary","marginTop","theme","spacing","unit","groupTitle","fontWeight","listitem","paddingTop","paddingBottom","withStyles","Download","moment","find","selector","class_name","date","$gte","subtract","format","$lte","add","fields","limit","sync_orders","sync_products","Inbox","get","current_user","sort","a","b","ta","timestamp","tb","number_doc","posted","partner","client_of_dealer","manager","_masks","ldt","cat","partners","users","user","Share","is_empty_guid","branch","empty","Map","calc_order","is_new","load","find_rows","push_only","o","set","size","Array","from","Object","assign","presentation","handleToggle","hasOwnProperty","status","put","forceUpdate","Templates","reject","sync","replicate","batch_size","batches_limit","retry","query_params","cancel","removeAllListeners","department"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gGAAgG;;AAEhG;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qDAAqD,sBAAsB,Y;;;;;;;;AC1K3E;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA,kDAAkD,kGAAkG;;AAEpJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uC;;;;;;;;ACnCA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA,kDAAkD,2IAA2I;;AAE7L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2B;;;;;;;;ACnCA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA,kDAAkD,qGAAqG;;AAEvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wC;;;;;;;;;;;4yCCnCA;;;;;;;MAYMuB,U,yRAEG,iBACL;AADK,uBAE+B7J,GAAGC,QAAH,CAAYC,KAF3C,CAEEC,KAFF,oBAEEA,KAFF,CAESC,MAFT,oBAESA,MAFT,CAEiBC,UAFjB,oBAEiBA,UAFjB,CAIL,KAAKpB,QAAL,CAAc,CAACC,KAAM,uCAAP,CAAd,EACA,MAAO,IAAIoD,QAAJ,CAAY,SAACQ,OAAD,CAAUgH,MAAV,CAAqB,CAEtC,GAAMC,MAAO5J,MAAMG,GAAN,CAAU0J,SAAV,CAAoBZ,IAApB,CAAyBhJ,OAAOE,GAAhC,CAAqC,CAChD2J,WAAY,GADoC,CAEhDC,cAAe,CAFiC,CAGhDC,MAAO,IAHyC,CAIhDvI,OAAQ,gBAJwC,CAKhDwI,aAAc,CAAC/B,KAAMhI,UAAP,CALkC,CAArC,EAOV0C,EAPU,CAOP,OAPO,CAOE,SAACc,GAAD,CAAS,CACpBiG,OAAOjG,GAAP,EACH,CATY,EAUVd,EAVU,CAUP,UAVO,CAUK,UAAM,CACpBgH,KAAKM,MAAL,GACAN,KAAKO,kBAAL,GACAxH,UACD,CAdU,CAAb,CAgBD,CAlBM,EAmBJlC,IAnBI,CAmBC,UAAM,CACV,OAAK3B,QAAL,CAAc,CAACC,KAAM,kDAAP,CAA2DG,UAAW,CAAtE,CAAyEE,OAAQ,EAAjF,CAAd,EACA,MAAOY,OAAMG,GAAN,CAAU+F,IAAV,CAAe,CACpBC,SAAU,CAACiE,WAAYvK,GAAGmC,KAAH,CAASC,KAAT,CAAeC,IAA5B,CAAkC/C,MAAO,UAAzC,CADU,CAEpBwH,OAAQ,CAAC,KAAD,CAAQ,YAAR,CAFY,CAGpBC,MAAO,IAHa,CAAf,CAAP,CAKD,CA1BI,EA2BJnG,IA3BI,CA2BC,cAAY,IAAVf,KAAU,MAAVA,IAAU,CAChB,MAAO,QAAKoH,aAAL,CAAmBpH,IAAnB,CAAP,CACD,CA7BI,EA8BJe,IA9BI,CA8BC,UAAM,CACV,MAAO,QAAKoC,eAAL,EAAP,CACD,CAhCI,EAiCJkB,KAjCI,CAiCE,SAACL,GAAD,CAAS,CACd,OAAK5E,QAAL,CAAc,CAACW,MAAOiE,IAAIM,OAAJ,EAAe,+BAAvB,CAAd,EACD,CAnCI,CAAP,CAqCD,C,uBA5CqB,0D,EAgDxB0F,UAAUxG,SAAV,CAAsB,CACpBW,OAAQ,kDAAAV,CAAUiB,MAAV,CAAiBf,UADL,CAEpBL,aAAc,kDAAAG,CAAUC,IAAV,CAAeC,UAFT,CAAtB,CAKA,yDAAeqG,SAAf,E","file":"static/js/7.fe94e4bf.chunk.js","sourcesContent":["/**\r\n * Абстрактный компонент с индикатором прогресса\r\n *\r\n * @module Progress\r\n *\r\n * Created by Evgeniy Malyarov on 24.03.2018.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { LinearProgress } from 'material-ui/Progress';\r\n\r\nclass Progress extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {\r\n      error: '',\r\n      step: 'Подготовка данных...',\r\n      docs: null,\r\n      prods: null,\r\n      completed: 0,\r\n      buffer: 10,\r\n    };\r\n    this.timer = 0;\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    const {local, remote, authorized} = $p.adapters.pouch;\r\n\r\n    if(local.doc === remote.doc) {\r\n      this.setState({error: `В режиме 'direct', синхронизация заказов не требуется`});\r\n      return;\r\n    }\r\n\r\n    if(!authorized) {\r\n      this.setState({error: `Пользователь должен быть авторизован на сервере`});\r\n      return;\r\n    }\r\n\r\n    this.timer = setInterval(this.progress, 700);\r\n\r\n    this.init();\r\n\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.timer && clearInterval(this.timer);\r\n  }\r\n\r\n  /**\r\n   * Синхронизирует массив заказов\r\n   * @param refs\r\n   */\r\n  sync_orders(docs, keys) {\r\n\r\n    const {local, remote} = $p.adapters.pouch;\r\n\r\n    this.setState({step: 'Сравниваем версии заказов local и remote...', completed: 0, buffer: 10});\r\n\r\n    return remote.doc.allDocs({keys})\r\n      .then(({rows}) => {\r\n        const diff = [];\r\n        for(const rdoc of rows) {\r\n          if(rdoc.value){\r\n            if(!docs.some((doc) => {\r\n                return doc.key && doc.value ?\r\n                  doc.id === rdoc.id && doc.value.rev === rdoc.value.rev : doc._id === rdoc.id && doc._rev === rdoc.value.rev;\r\n              })) {\r\n              diff.push(rdoc.id);\r\n            }\r\n          }\r\n          else {\r\n            // TODO: обработать пометку удаления\r\n          }\r\n        }\r\n        return {ldoc: keys, diff};\r\n      })\r\n      .then(({ldoc, diff}) => {\r\n        if(diff.length) {\r\n          this.setState({step: 'Получаем объекты заказов с сервера...', completed: 0, buffer: 10});\r\n          return remote.doc.allDocs({include_docs: true, attachments: true, keys: diff})\r\n            .then(({rows}) => {\r\n              this.setState({step: 'Записываем изменённые заказы...'});\r\n              return local.doc.bulkDocs(rows.filter((v) => v.doc).map(({doc}) => doc), {new_edits: false});\r\n            })\r\n            .then(() => {\r\n              this.setState({step: 'Получаем объекты заказов из базы браузера...', completed: 0, buffer: 10});\r\n              return local.doc.allDocs({include_docs: true, keys: ldoc});\r\n            });\r\n        }\r\n        else {\r\n          this.setState({step: 'Получаем объекты заказов из базы браузера...', completed: 0, buffer: 10});\r\n          return local.doc.allDocs({include_docs: true, keys: ldoc});\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Синхронизирует продукции\r\n   * @param refs\r\n   */\r\n  sync_products(docs) {\r\n\r\n    const {local, remote} = $p.adapters.pouch;\r\n\r\n    const keys = [];\r\n    for (const {production} of docs) {\r\n      if(production) {\r\n        for (const row of production) {\r\n          if(row.characteristic && row.characteristic !== $p.utils.blank.guid) {\r\n            keys.push(`cat.characteristics|${row.characteristic}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    this.setState({step: 'Сравниваем версии характеристик продукций...', completed: 0, buffer: 10});\r\n\r\n    return Promise.all([\r\n      local.doc.allDocs({keys}),\r\n      remote.doc.allDocs({keys}),\r\n    ])\r\n      .then((res) => {\r\n        const ldoc = res[0].rows;\r\n        const diff = [];\r\n        for(const rdoc of res[1].rows) {\r\n          if(!rdoc.value) {\r\n            // TODO: обработать удаление\r\n            continue;\r\n          }\r\n          if(!ldoc.some((doc) => {\r\n              return !doc.error && doc.id === rdoc.id && doc.value.rev === rdoc.value.rev;\r\n            })) {\r\n            diff.push(rdoc.id);\r\n          }\r\n        }\r\n        // формируем массив пачек по 100 элементов\r\n        const difs = {\r\n          length: diff.length,\r\n          rows: []\r\n        };\r\n        this.setState({step: `Найдено ${difs.length} отличий в характеристиках`, completed: 0, buffer: 10});\r\n        let rows = [];\r\n        for(const dif of diff) {\r\n          if(rows.length < 100) {\r\n            rows.push(dif);\r\n          }\r\n          else {\r\n            difs.rows.push(rows);\r\n            rows = [dif];\r\n          }\r\n        }\r\n        if(rows.length) {\r\n          difs.rows.push(rows);\r\n        }\r\n        return difs;\r\n      })\r\n      .then((difs) => {\r\n        // редуцируем\r\n        return difs.rows.reduce((sum, keys, index) => {\r\n          return sum.then(() => {\r\n            this.setState({step: `Обработано ${index * 100} из ${difs.length} характеристик продукций`});\r\n            return remote.doc.allDocs({include_docs: true, keys})\r\n              .then(({rows}) => {\r\n                // const deleted = rows.filter((v) => !v.doc);\r\n                return local.doc.bulkDocs(rows.filter((v) => v.doc && !v.doc._attachments).map((v) => v.doc), {new_edits: false});\r\n              });\r\n          });\r\n        }, Promise.resolve());\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Перестраивает индексы\r\n   */\r\n  rebuild_indexes() {\r\n\r\n    this.setState({step: `Перестраиваем индексы...`, completed: 0, buffer: 10});\r\n    $p.adapters.pouch.on('rebuild_indexes', this.on_index);\r\n\r\n    return $p.adapters.pouch.rebuild_indexes('doc')\r\n      .then(() => {\r\n        $p.adapters.pouch.off('rebuild_indexes', this.on_index);\r\n        if(this.timer) {\r\n          clearInterval(this.timer);\r\n          this.timer = 0;\r\n        }\r\n        this.setState({error: 'Обработка завершена'});\r\n        setTimeout(() => {\r\n          this.props.handleCancel();\r\n        }, 2000);\r\n      });\r\n\r\n  }\r\n\r\n  on_index = (info) => {\r\n    this.setState({step: `Перестраиваем индекс ${info.index}...`});\r\n  }\r\n\r\n  progress = () => {\r\n    const { completed } = this.state;\r\n    if (completed > 100) {\r\n      this.setState({ completed: 0, buffer: 10 });\r\n    } else {\r\n      const diff = Math.random() * 5;\r\n      const diff2 = Math.random() * 5;\r\n      this.setState({ completed: completed + diff, buffer: completed + diff + diff2 });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {error, step, completed, buffer} = this.state;\r\n\r\n    if(error) {\r\n      return <div>{error}</div>;\r\n    }\r\n\r\n    return [\r\n      <div key=\"progress\" style={{flexGrow: 1}}>\r\n        <LinearProgress color=\"secondary\" variant=\"buffer\" value={completed} valueBuffer={buffer} />\r\n        <br />\r\n      </div>,\r\n      <div key=\"text\">{step}</div>\r\n    ];\r\n  }\r\n}\r\n\r\nProgress.propTypes = {\r\n  handleCancel: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Progress;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/Progress.js","import UtilsRouter from './UtilsRouter';\r\n\r\nexport default UtilsRouter;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/index.js","/**\r\n * ### Утилиты автономного режима\r\n * каркас компонента - визуальная глупая часть\r\n *\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from 'material-ui/Button';\r\nimport Dialog from 'metadata-react/App/Dialog';\r\nimport connect from './connect';\r\n\r\nimport Download from './Download';\r\nimport Inbox from './Inbox';\r\nimport Share from './Share';\r\nimport Templates from './Templates';\r\n\r\nclass UtilsRouter extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    const {handleCancel, handleCalck} = props;\r\n    this.handleCancel = handleCancel.bind(this);\r\n    this.handleCalck = handleCalck.bind(this);\r\n\r\n    this.state = {\r\n      info: null,\r\n      err: null,\r\n      title: 'Утилиты автономного режима',\r\n      Component: null,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    $p.adapters.pouch.remote.doc.info()\r\n      .then((info) => {\r\n        this.setState({info}, () => {\r\n          switch (this.props.dialog.cmd) {\r\n          case 'btn_templates':\r\n            this.setState({Component: Templates, title: 'Загрузка шаблонов'});\r\n            break;\r\n\r\n          case 'btn_download':\r\n            this.setState({Component: Download, title: 'Обновление заказов из облака'});\r\n            break;\r\n\r\n          case 'btn_share':\r\n            this.setState({Component: Share, title: 'Отправка заказа сотруднику'});\r\n            break;\r\n\r\n          case 'btn_inbox':\r\n            this.setState({Component: Inbox, title: 'Входящие заказы'});\r\n            break;\r\n\r\n          }\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        this.setState({error: err.message || 'Ошибка доступа к базе doc'});\r\n      });\r\n  }\r\n\r\n  handleOk = () => {\r\n    this.handleCalck().then(this.handleCancel);\r\n  };\r\n\r\n  renderContent() {\r\n    const {err, info, Component} = this.state;\r\n\r\n    if(err) {\r\n      return <div>Сервер недоступен</div>;\r\n    }\r\n\r\n    if(!info) {\r\n      return <div>Проверка связи с сервером...</div>;\r\n    }\r\n\r\n    if(Component) {\r\n      return <Component {...this.props} handleCancel={this.handleCancel} />;\r\n    }\r\n\r\n    return <div>Подготовка данных...</div>;\r\n  }\r\n\r\n  render() {\r\n\r\n    const {handleCancel, props: {classes}, state: {title}} = this;\r\n\r\n    return <Dialog\r\n      open\r\n      initFullScreen\r\n      classes={{paper: classes.paper}}\r\n      title={title}\r\n      onClose={handleCancel}\r\n      actions={[\r\n        <Button key=\"cancel\" onClick={handleCancel} color=\"primary\">Закрыть</Button>\r\n      ]}\r\n    >\r\n      {this.renderContent()}\r\n    </Dialog>;\r\n\r\n  }\r\n}\r\n\r\nUtilsRouter.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  dialog: PropTypes.object.isRequired,\r\n  handlers: PropTypes.object.isRequired,\r\n  handleCalck: PropTypes.func.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(UtilsRouter);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/UtilsRouter.js","/**\r\n * ### Карточка покупателя\r\n * обработчики событий и модификаторы данных\r\n *\r\n * Created by Evgeniy Malyarov on 13.11.2017.\r\n */\r\n\r\nimport {connect} from 'react-redux';\r\nimport withStyles from './styles';\r\nimport compose from 'recompose/compose';\r\n\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    handleCalck() {\r\n      //dp.calc_order.production.sync_grid(props.dialog.wnd.elmnts.grids.production);\r\n      return Promise.resolve();\r\n    },\r\n    handleCancel() {\r\n      props.handlers.handleIfaceState({\r\n        component: 'CalcOrderList',\r\n        name: 'dialog',\r\n        value: null,\r\n      });\r\n      if(props.dialog.cmd === 'btn_share') {\r\n        props.handlers.handleIfaceState({\r\n          component: 'DataObjPage',\r\n          name: 'dialog',\r\n          value: null,\r\n        });\r\n      }\r\n    },\r\n    handleOpen(ref) {\r\n      props.handlers.handleNavigate(`/doc.calc_order/${ref.replace('doc.calc_order|', '')}`);\r\n    }\r\n  };\r\n}\r\n\r\n// function mapDispatchToProps(dispatch) {\r\n//   return {};\r\n// }\r\n\r\nexport default compose(\r\n  withStyles,\r\n  connect(mapStateToProps /*, mapDispatchToProps */),\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/connect.js","/**\r\n * ### Карточка покупателя\r\n * стили оформления\r\n *\r\n * Created by Evgeniy Malyarov on 14.03.2018.\r\n */\r\n\r\nimport {withStyles} from 'material-ui/styles';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    minWidth: 880,\r\n    maxHeight: 'calc(100vh - 80px)',\r\n  },\r\n  entered: {\r\n    minHeight: 120,\r\n  },\r\n  secondary: {\r\n    marginTop: -theme.spacing.unit * 1.5,\r\n  },\r\n  groupTitle: {\r\n    fontWeight: 'bold',\r\n  },\r\n  listitem: {\r\n    paddingTop: theme.spacing.unit,\r\n    paddingBottom: theme.spacing.unit,\r\n  }\r\n});\r\n\r\nexport default withStyles(styles);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/styles.js","/**\r\n * Обновляет заказы и продукции из облака\r\n *\r\n * @module Download\r\n *\r\n * Created by Evgeniy Malyarov on 24.03.2018.\r\n */\r\n\r\nimport PropTypes from 'prop-types';\r\nimport Progress from './Progress';\r\n\r\nclass Download extends Progress {\r\n\r\n  init() {\r\n\r\n    const {local} = $p.adapters.pouch;\r\n    const {moment} = $p.utils;\r\n\r\n    this.setState({step: 'Получаем массив заказов текущей базы...'});\r\n    local.doc.find({\r\n      selector: {\r\n        class_name: 'doc.calc_order',\r\n        date: {\r\n          $gte: moment().subtract(3, 'months').format('YYYY-MM-DD'),\r\n          $lte: moment().add(1, 'months').format('YYYY-MM-DD')\r\n        }\r\n      },\r\n      fields: ['_id', '_rev', 'state'],\r\n      limit: 10000,\r\n    })\r\n      .then(({docs}) => {\r\n        const keys = docs.filter((v) => v.state !== 'template').map((v) => v._id);\r\n        return this.sync_orders(docs, keys);\r\n      })\r\n      .then(({rows}) => {\r\n        const docs = rows.filter((v) => v.doc).map((v) => v.doc);\r\n        return this.sync_products(docs);\r\n      })\r\n      .then(() => {\r\n        return this.rebuild_indexes();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({error: err.message || 'Ошибка синхронизации заказов'});\r\n      });\r\n\r\n  }\r\n\r\n}\r\n\r\nDownload.propTypes = {\r\n  dialog: PropTypes.object.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Download;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/Download.js","/**\r\n * Заказы, отправленные сотруднику с push автономным режимом работы\r\n *\r\n * @module Inbox\r\n *\r\n * Created by Evgeniy Malyarov on 24.03.2018.\r\n */\r\n\r\nimport React from 'react';\r\nimport Progress from './Progress';\r\nimport PropTypes from 'prop-types';\r\nimport { LinearProgress } from 'material-ui/Progress';\r\nimport List, { ListItem, ListItemText } from 'material-ui/List';\r\n\r\nclass Inbox extends Progress {\r\n\r\n  init() {\r\n\r\n    const {local, remote} = $p.adapters.pouch;\r\n\r\n    // получим local-документ текущего пользователя\r\n    this.setState({step: 'Получаем inbox-документ текущего пользователя...'});\r\n    remote.doc.get(`_local/inbox_${$p.current_user.ref}`)\r\n      .then((doc) => {\r\n        this.setState({step: 'Сравниваем версии входящих заказов...'});\r\n        const docs = [];\r\n        for(const ref in doc) {\r\n          if(ref[0] == '_') {\r\n            continue;\r\n          }\r\n          docs.push({ref});\r\n        }\r\n        const keys = docs.map((v) => `doc.calc_order|${v.ref}`);\r\n        return local.doc.allDocs({keys})\r\n          .then(({rows}) => {\r\n            return this.sync_orders(rows, keys);\r\n          });\r\n      })\r\n      .then(({rows}) => {\r\n        const docs = rows.filter((v) => v.doc).map((v) => v.doc);\r\n        return this.sync_products(docs)\r\n          .then(() => {\r\n            docs.sort((a, b) => {\r\n              const ta = a.timestamp ? a.timestamp.moment : a.date;\r\n              const tb = b.timestamp ? b.timestamp.moment : b.date;\r\n              if(ta > tb) {\r\n                return -1;\r\n              }\r\n              if(tb > ta) {\r\n                return 1;\r\n              }\r\n              return 0;\r\n            });\r\n            if(this.timer){\r\n              clearInterval(this.timer);\r\n              this.timer = 0;\r\n            }\r\n            this.setState({docs});\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        this.setState({error: err.message || `Ошибка доступа к _local/inbox_`});\r\n      });\r\n  }\r\n\r\n  handleOpen = value => () => {\r\n    this.props.handleCancel();\r\n    this.props.handleOpen(value);\r\n  }\r\n\r\n  render() {\r\n    const {error, step, docs, completed, buffer} = this.state;\r\n    const {moment} = $p.utils;\r\n\r\n    if(error) {\r\n      return <div>{error}</div>;\r\n    }\r\n\r\n    if(docs) {\r\n      return <List key=\"list\">\r\n        {docs.map(value => {\r\n          const {_id, number_doc, date, posted, timestamp, partner, client_of_dealer, manager} = value;\r\n          return <ListItem\r\n            key={_id}\r\n            button\r\n            onDoubleClick={this.handleOpen(_id)}\r\n          >\r\n            <ListItemText\r\n              primary={`№${number_doc || 'б/н'} от ${moment(date).format(moment._masks.ldt)} (${posted ? '' : 'не '}проведен), ${\r\n              client_of_dealer || $p.cat.partners.get(partner).name || 'Клиент не указан'}`}\r\n              secondary={`${$p.cat.users.get(manager).name || timestamp && timestamp.user}`}\r\n            />\r\n          </ListItem>;\r\n        })}\r\n      </List>;\r\n    }\r\n\r\n    return [\r\n      <div key=\"progress\" style={{flexGrow: 1}}>\r\n        <LinearProgress color=\"secondary\" variant=\"buffer\" value={completed} valueBuffer={buffer} />\r\n        <br />\r\n      </div>,\r\n      <div key=\"text\">{step}</div>\r\n    ];\r\n  }\r\n}\r\n\r\nInbox.propTypes = {\r\n  dialog: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Inbox;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/Inbox.js","/**\r\n * Отправляет ссылку на заказ некому сотруднику\r\n *\r\n * @module Share\r\n *\r\n * Created by Evgeniy Malyarov on 24.03.2018.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport List, { ListItem, ListItemText } from 'material-ui/List';\r\nimport Checkbox from 'material-ui/Checkbox';\r\nimport Typography from 'material-ui/Typography';\r\n\r\nclass Share extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.state = {\r\n      error: '',\r\n      doc: null,\r\n      users: null,\r\n    };\r\n    const {ref} = this.props.dialog;\r\n    const {current_user} = $p;\r\n\r\n    if($p.utils.is_empty_guid(ref)) {\r\n      this.state.error = 'При открытии из формы списка, укажите текущую строку заказа, который собираетесь отправить сотруднику';\r\n    }\r\n    else if(!current_user || current_user.branch.empty()) {\r\n      this.state.error = 'Нельзя поделиться заказом центральной базы - только из базы отдела';\r\n    }\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {state: {error}, props: {dialog}} = this;\r\n    const users = new Map();\r\n\r\n    if(!error) {\r\n      const doc = $p.doc.calc_order.get(dialog.ref);\r\n      const {branch} = $p.current_user;\r\n      (doc.is_new() ? doc.load() : Promise.resolve())\r\n        .then(() => {\r\n          $p.cat.users.find_rows({branch, push_only: true}, (o) => users.set(o, {}));\r\n          if(users.size < 1) {\r\n            this.setState({error: `Некому отправлять, в филиале \"${branch.name}\", нет сотрудников с push-репликацией`});\r\n          }\r\n          else {\r\n            // получим local-документы пользователей\r\n            $p.adapters.pouch.remote.doc.allDocs({\r\n              include_docs: true,\r\n              keys: Array.from(users.keys()).map((v) => `_local/inbox_${v.ref}`)\r\n            })\r\n              .then(({rows}) => {\r\n                for (const row of rows) {\r\n                  const map = users.get($p.cat.users.get(row.key.replace('_local/inbox_', '')));\r\n                  if(row.error) {\r\n                    map._id = row.key;\r\n                  }\r\n                  else {\r\n                    Object.assign(map, row.doc);\r\n                  }\r\n                }\r\n                this.setState({doc, users});\r\n              })\r\n              .catch((err) => {\r\n                this.setState({error: err.message || `Ошибка доступа к _local/inbox_`});\r\n              });\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  handleToggle = value => () => {\r\n    const map = this.state.users.get(value);\r\n    const {ref} = this.state.doc;\r\n    const {doc} = $p.adapters.pouch.remote;\r\n    if(map.hasOwnProperty(ref)) {\r\n      delete map[ref];\r\n    }\r\n    else {\r\n      map[ref] = true;\r\n    }\r\n\r\n    // результат сразу записываем\r\n    doc.get(map._id)\r\n      .catch((err) => {\r\n        if(err.status != 404) {\r\n          throw err;\r\n        }\r\n        return map;\r\n      })\r\n      .then((rdoc) => {\r\n        if(rdoc !== map) {\r\n          if(rdoc.hasOwnProperty(ref)) {\r\n            delete rdoc[ref];\r\n          }\r\n          else {\r\n            rdoc[ref] = true;\r\n          }\r\n        }\r\n        return doc.put(rdoc);\r\n      })\r\n      .then(() => {\r\n        this.forceUpdate();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({error: err.message || `Не удалось записать ${map._id}`});\r\n      });\r\n  };\r\n\r\n  render() {\r\n\r\n    const {error, doc, users} = this.state;\r\n\r\n    if(error) {\r\n      return <div>{error}</div>;\r\n    }\r\n\r\n    if(!doc) {\r\n      return <div>Подготовка данных...</div>;\r\n    }\r\n\r\n    return [\r\n        <Typography key=\"doc\" variant=\"subheading\" gutterBottom>{doc.presentation}</Typography>,\r\n        <List key=\"list\">\r\n          {Array.from(users.keys()).map(value => (\r\n            <ListItem\r\n              key={value.ref}\r\n              button\r\n              onClick={this.handleToggle(value)}\r\n            >\r\n              <Checkbox\r\n                checked={!!users.get(value)[doc.ref]}\r\n                tabIndex={-1}\r\n                disableRipple\r\n              />\r\n              <ListItemText primary={value.name} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      ];\r\n\r\n  }\r\n}\r\n\r\nShare.propTypes = {\r\n  dialog: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Share;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/Share.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _Checkbox = require('./Checkbox');\n\nObject.defineProperty(exports, 'default', {\n  enumerable: true,\n  get: function get() {\n    return _interopRequireDefault(_Checkbox).default;\n  }\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/material-ui/Checkbox/index.js\n// module id = 1177\n// module chunks = 7","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.styles = undefined;\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _defineProperty2 = require('babel-runtime/helpers/defineProperty');\n\nvar _defineProperty3 = _interopRequireDefault(_defineProperty2);\n\nvar _objectWithoutProperties2 = require('babel-runtime/helpers/objectWithoutProperties');\n\nvar _objectWithoutProperties3 = _interopRequireDefault(_objectWithoutProperties2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _SwitchBase = require('../internal/SwitchBase');\n\nvar _SwitchBase2 = _interopRequireDefault(_SwitchBase);\n\nvar _CheckBoxOutlineBlank = require('../internal/svg-icons/CheckBoxOutlineBlank');\n\nvar _CheckBoxOutlineBlank2 = _interopRequireDefault(_CheckBoxOutlineBlank);\n\nvar _CheckBox = require('../internal/svg-icons/CheckBox');\n\nvar _CheckBox2 = _interopRequireDefault(_CheckBox);\n\nvar _IndeterminateCheckBox = require('../internal/svg-icons/IndeterminateCheckBox');\n\nvar _IndeterminateCheckBox2 = _interopRequireDefault(_IndeterminateCheckBox);\n\nvar _helpers = require('../utils/helpers');\n\nvar _withStyles = require('../styles/withStyles');\n\nvar _withStyles2 = _interopRequireDefault(_withStyles);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar styles = exports.styles = function styles(theme) {\n  return {\n    default: {\n      color: theme.palette.text.secondary\n    },\n    checked: {},\n    checkedPrimary: {\n      color: theme.palette.primary.main\n    },\n    checkedSecondary: {\n      color: theme.palette.secondary.main\n    },\n    disabled: {\n      color: theme.palette.action.disabled\n    }\n  };\n};\n\nfunction Checkbox(props) {\n  var checkedIcon = props.checkedIcon,\n      classes = props.classes,\n      color = props.color,\n      icon = props.icon,\n      indeterminate = props.indeterminate,\n      indeterminateIcon = props.indeterminateIcon,\n      other = (0, _objectWithoutProperties3.default)(props, ['checkedIcon', 'classes', 'color', 'icon', 'indeterminate', 'indeterminateIcon']);\n\n  var checkedClass = (0, _classnames2.default)(classes.checked, (0, _defineProperty3.default)({}, classes['checked' + (0, _helpers.capitalize)(color)], color !== 'default'));\n\n  return _react2.default.createElement(_SwitchBase2.default, (0, _extends3.default)({\n    checkedIcon: indeterminate ? indeterminateIcon : checkedIcon,\n    classes: {\n      default: classes.default,\n      checked: checkedClass,\n      disabled: classes.disabled\n    },\n    icon: indeterminate ? indeterminateIcon : icon\n  }, other));\n}\n\nCheckbox.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /**\n   * If `true`, the component is checked.\n   */\n  checked: _propTypes2.default.oneOfType([_propTypes2.default.bool, _propTypes2.default.string]),\n  /**\n   * The icon to display when the component is checked.\n   */\n  checkedIcon: _propTypes2.default.node,\n  /**\n   * Useful to extend the style applied to components.\n   */\n  classes: _propTypes2.default.object.isRequired,\n  /**\n   * The color of the component. It supports those theme colors that make sense for this component.\n   */\n  color: _propTypes2.default.oneOf(['primary', 'secondary', 'default']),\n  /**\n   * If `true`, the switch will be disabled.\n   */\n  disabled: _propTypes2.default.bool,\n  /**\n   * If `true`, the ripple effect will be disabled.\n   */\n  disableRipple: _propTypes2.default.bool,\n  /**\n   * The icon to display when the component is unchecked.\n   */\n  icon: _propTypes2.default.node,\n  /**\n   * The id of the `input` element.\n   */\n  id: _propTypes2.default.string,\n  /**\n   * If `true`, the component appears indeterminate.\n   */\n  indeterminate: _propTypes2.default.bool,\n  /**\n   * The icon to display when the component is indeterminate.\n   */\n  indeterminateIcon: _propTypes2.default.node,\n  /**\n   * Properties applied to the `input` element.\n   */\n  inputProps: _propTypes2.default.object,\n  /**\n   * Use that property to pass a ref callback to the native input component.\n   */\n  inputRef: _propTypes2.default.func,\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {object} event The event source of the callback.\n   * You can pull out the new value by accessing `event.target.checked`.\n   * @param {boolean} checked The `checked` value of the switch\n   */\n  onChange: _propTypes2.default.func,\n  /**\n   * The input component property `type`.\n   */\n  type: _propTypes2.default.string,\n  /**\n   * The value of the component.\n   */\n  value: _propTypes2.default.string\n} : {};\n\nCheckbox.defaultProps = {\n  checkedIcon: _react2.default.createElement(_CheckBox2.default, null),\n  color: 'secondary',\n  icon: _react2.default.createElement(_CheckBoxOutlineBlank2.default, null),\n  indeterminate: false,\n  indeterminateIcon: _react2.default.createElement(_IndeterminateCheckBox2.default, null)\n};\n\nexports.default = (0, _withStyles2.default)(styles, { name: 'MuiCheckbox' })(Checkbox);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/material-ui/Checkbox/Checkbox.js\n// module id = 1178\n// module chunks = 7","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _pure = require('recompose/pure');\n\nvar _pure2 = _interopRequireDefault(_pure);\n\nvar _SvgIcon = require('../../SvgIcon');\n\nvar _SvgIcon2 = _interopRequireDefault(_SvgIcon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore - internal component.\n */\nvar _ref = _react2.default.createElement('path', { d: 'M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z' });\n\nvar CheckBoxOutlineBlank = function CheckBoxOutlineBlank(props) {\n  return _react2.default.createElement(\n    _SvgIcon2.default,\n    props,\n    _ref\n  );\n};\nCheckBoxOutlineBlank = (0, _pure2.default)(CheckBoxOutlineBlank);\nCheckBoxOutlineBlank.muiName = 'SvgIcon';\n\nexports.default = CheckBoxOutlineBlank;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/material-ui/internal/svg-icons/CheckBoxOutlineBlank.js\n// module id = 1179\n// module chunks = 7","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _pure = require('recompose/pure');\n\nvar _pure2 = _interopRequireDefault(_pure);\n\nvar _SvgIcon = require('../../SvgIcon');\n\nvar _SvgIcon2 = _interopRequireDefault(_SvgIcon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore - internal component.\n */\nvar _ref = _react2.default.createElement('path', { d: 'M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z' });\n\nvar CheckBox = function CheckBox(props) {\n  return _react2.default.createElement(\n    _SvgIcon2.default,\n    props,\n    _ref\n  );\n};\nCheckBox = (0, _pure2.default)(CheckBox);\nCheckBox.muiName = 'SvgIcon';\n\nexports.default = CheckBox;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/material-ui/internal/svg-icons/CheckBox.js\n// module id = 1180\n// module chunks = 7","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _pure = require('recompose/pure');\n\nvar _pure2 = _interopRequireDefault(_pure);\n\nvar _SvgIcon = require('../../SvgIcon');\n\nvar _SvgIcon2 = _interopRequireDefault(_SvgIcon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * @ignore - internal component.\n */\nvar _ref = _react2.default.createElement('path', { d: 'M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z' });\n\nvar IndeterminateCheckBox = function IndeterminateCheckBox(props) {\n  return _react2.default.createElement(\n    _SvgIcon2.default,\n    props,\n    _ref\n  );\n};\nIndeterminateCheckBox = (0, _pure2.default)(IndeterminateCheckBox);\nIndeterminateCheckBox.muiName = 'SvgIcon';\n\nexports.default = IndeterminateCheckBox;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/material-ui/internal/svg-icons/IndeterminateCheckBox.js\n// module id = 1181\n// module chunks = 7","/**\r\n * Загружает шаблоны из облака\r\n * Имеет смысл только для  push автономного режима работы\r\n *\r\n * @module Templates\r\n *\r\n * Created by Evgeniy Malyarov on 24.03.2018.\r\n */\r\n\r\nimport PropTypes from 'prop-types';\r\nimport Progress from './Progress';\r\n\r\nclass Templates extends Progress {\r\n\r\n  init() {\r\n    // получаем локальные и серверные шаблоны\r\n    const {local, remote, authorized} = $p.adapters.pouch;\r\n\r\n    this.setState({step: 'Синхронизируем базовые справочники...'});\r\n    return new Promise((resolve, reject) => {\r\n\r\n      const sync = local.doc.replicate.from(remote.doc, {\r\n        batch_size: 200,\r\n        batches_limit: 6,\r\n        retry: true,\r\n        filter: 'auth/push_only',\r\n        query_params: {user: authorized}\r\n      })\r\n        .on('error', (err) => {\r\n          reject(err);\r\n      })\r\n        .on('complete', () => {\r\n          sync.cancel();\r\n          sync.removeAllListeners();\r\n          resolve();\r\n        });\r\n\r\n    })\r\n      .then(() => {\r\n        this.setState({step: 'Получаем документы шаблонов из локальной базы...', completed: 0, buffer: 10});\r\n        return local.doc.find({\r\n          selector: {department: $p.utils.blank.guid, state: 'template'},\r\n          fields: ['_id', 'production'],\r\n          limit: 1000,\r\n        });\r\n      })\r\n      .then(({docs}) => {\r\n        return this.sync_products(docs);\r\n      })\r\n      .then(() => {\r\n        return this.rebuild_indexes();\r\n      })\r\n      .catch((err) => {\r\n        this.setState({error: err.message || 'Ошибка синхронизации шаблонов'});\r\n      });\r\n\r\n  }\r\n\r\n}\r\n\r\nTemplates.propTypes = {\r\n  dialog: PropTypes.object.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Templates;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/PushUtils/Templates.js"],"sourceRoot":""}