{"version":3,"sources":["metadata/modifiers.js","../node_modules/react-portal/es/PortalCompat.js","../node_modules/metadata-react/DnR/DnR.js","metadata/chartscharacteristics/index.js","metadata/chartscharacteristics/cch_predefined_elmnts.js","metadata/chartscharacteristics/cch_properties.js","metadata/reports/index.js","metadata/reports/materials_demand.js","components/RepMaterialsDemand/RepParams.js","components/RepMaterialsDemand/SelectOrder.js","../node_modules/@material-ui/icons/Work.js","../node_modules/metadata-react/DnR/Dialog.js","../node_modules/react-portal/es/index.js","../node_modules/react-portal/es/Portal.js","../node_modules/react-portal/es/utils.js","../node_modules/react-portal/es/LegacyPortal.js","../node_modules/react-portal/es/PortalWithState.js","../node_modules/metadata-react/DnR/themes.js","components/RepMaterialsDemand/Report.js","metadata/dataprocessors/index.js","metadata/dataprocessors/dp_builder.js","metadata/dataprocessors/dp_builder_price.js","metadata/dataprocessors/dp_buyers_order.js","metadata/dataprocessors/dp_buyers_order_form_product_list.js","metadata/common/index.js","metadata/common/i18n.ru.js","openjscad/export_dxf.js"],"names":["disableSelect","userSelect","WebkitUserSelect","msUserSelect","MozUserSelect","OUserSelect","defaultTheme","title","overflow","width","height","frame","position","margin","padding","transition","prefixedTransition","WebkitTransition","msTransition","MozTransition","OTransition","DnR","props","theme","cursorX","cursorY","clicked","allowTransition","frameRect","state","cursor","mouseMoveListener","_onMove","bind","mouseUpListener","_onUp","initialWidth","initialHeight","initialTop","initialLeft","attachedTo","boundingBox","getFrameRect","top","refs","offsetTop","left","offsetLeft","addEventListener","nextProps","setState","removeEventListener","updateHistory","prevState","bottom","right","onTransform","setTimeout","forceUpdate","transform","innerWidth","innerHeight","style","contentStyle","contentClassName","titleStyle","minWidth","minHeight","animate","cursorRemap","children","boundary","onMove","onResize","pervFrameRect","hits","hitEdges","Math","max","currentWidth","frameLeft","x","currentHeight","frameTop","y","res","call","dnrState","titleBar","React","cloneElement","childrenWithProps","Children","map","child","frameTransition","_onDown","e","preventDefault","dnr","getBoundingClientRect","clientX","clientY","hitRange","edgeDetectionRange","hitTop","hitBottom","hitLeft","hitRight","stopPropagation","titleBounding","getTitleRect","_cursorStatus","Component","propTypes","PropTypes","oneOfType","object","string","number","bool","func","defaultProps","window","childContextTypes","SettingsToolbar","handleAdd","handleRemove","handleCustom","classes","bar","isRequired","StyledToolbar","withStyles","RepParams","row","_obj","fill_by_order","then","production","el","SelectOrder","context","handleTouchTap","event","open","handleRequestClose","handleSelect","_mgr","$p","doc","calc_order","_acl","paneStyle","backgroundColor","border","Dialog","minimize","Windows","WindowsTheme","onClose","onMinimize","_dnr","restore","onMaximize","maximize","indexOf","others","c","Button","hover","down","hoverStyle","downStyle","other","dragging","test","buttonStyle","TitleBar","buttons","button1","button2","button3","button1Children","button2Children","button3Children","OSXTheme","titleHeight","buttonRadius","fontSize","fontFamily","marginRight","borderRadius","content","outline","float","display","alignItems","closeButton","onClick","minimizeButton","maximizeButton","borderTopLeftRadius","borderTopRightRadius","background","color","titleBarColor","textAlign","verticalAlign","fontWeight","lineHeight","RepMaterialsDemand","handleMenuOpen","menuOpen","anchorEl","currentTarget","_report","handleMenuClose","handleList","calcOrders","ref","handleNavigate","handleObj","ToolbarExt","alignSelf","create","undefined","location","search","replace","_id","catch","first","forEach","characteristic","empty","number_doc","withIface","md","on","scheme","jscad","exec_dxf"],"mappings":"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;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,iBAAiB;AACjB;AACA,eAAe;;AAEf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA,eAAe,WAAW;AAC1B;AACA,iBAAiB,0BAA0B;AAC3C;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA,wCAAwC;AACxC;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,OAAO;;AAEP,GAAG;;;AAGH;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO;;AAEP;;AAEA;AACA;AACA;;AAEA,yCAAyC,uBAAuB;AAChE;AACA;AACA;AACA;AACA,GAAG;;AAEH;;;;;;;;;AC1LA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,qBAAqB;AACrB,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,oBAAoB,OAAO;AAC3B,uBAAuB,OAAO;AAC9B,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,YAAY,mBAAmB,mCAAmC;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,aAAa,sDAAsD;;AAEnE,eAAe,cAAc;AAC7B,eAAe,aAAa,kBAAkB;;AAE9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,IAAI,MAAM;AACrB;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,aAAa,gCAAgC;;AAE7C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8DAA8D,YAAY;AAC1E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,sBAAsB,OAAO;AAC7B,oBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;;AAEA,GAAG;;AAEH;;;;;;;;;ACpTA;AAAA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;ACPA;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,SAAS,gBAAgB;;AAEzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,eAAe,gCAAgC;;AAE/C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA,eAAe,4CAA4C;AAC3D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf,aAAa;;AAEb;;AAEA,WAAW;;AAEX;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,6EAA6E,gBAAgB;AAC7F;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wGAAwG,mCAAmC;AAC3I;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB;AACjB;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;;AAEA,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AA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;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;AAED;;;AAGA;AACA;AACA;AACA,E;;;;;;;;;;;;AC5EA;AAAA,gCAAgC,2CAA2C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD,2DAA2D,EAAE,EAAE,yDAAyD,qEAAqE,6DAA6D,oBAAoB,GAAG,EAAE;;AAEjjB,iDAAiD,0CAA0C,0DAA0D,EAAE;;AAEvJ,iDAAiD,aAAa,uFAAuF,EAAE,uFAAuF;;AAE9O,0CAA0C,+DAA+D,qGAAqG,EAAE,yEAAyE,eAAe,yEAAyE,EAAE,EAAE,uHAAuH;;AAE5e;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,eAAe;AACpC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,qBAAqB,gBAAgB;AACrC;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA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;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;AC9EA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA;AACA,gDAAgD,wBAAwB;AACxE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAa,sBAAsB;AACnC;AACA;AACA;AACA,gDAAgD,wBAAwB;AACxE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,YAAY;AAC3B;AACA;AACA,iBAAiB,eAAe;AAChC;AACA,gCAAgC,SAAS;AACzC;AACA,6CAA6C,uBAAuB;;AAEpE;AACA,gCAAgC,MAAM;AACtC;AACA,aAAa;;AAEb;AACA,mBAAmB,MAAM;AACzB;AACA,qBAAqB,WAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb,WAAW;AACX,2DAA2D,qBAAqB;AAChF;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;;AAEA;;;;;;;;;;;ACpKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;;AAGA;;AAEA;AACA;AACA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA,aAAa,OAAO;AACpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT,kBAAkB,qCAAqC;AACvD,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA,oBAAoB,QAAQ;AAC5B,eAAe,0BAA0B;AACzC,OAAO;;AAEP;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA,aAAa,qBAAqB;AAClC,aAAa,mBAAmB;AAChC;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;ACrIA;AAAA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;ACPA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL,GAAG;AACH;;;;;;;;;;;AClEA;;;GAKA,yDAAe,SAAU9D,EAAV,CAAc,CAC3BA,GAAGyF,EAAH,CAAMC,EAAN,CAAS,KAAT,CAAgB,SAACC,MAAD,CAAY,CAC1B;AACA,kFACGtG,IADH,CACQ,SAACuG,KAAD,QAAW,oFACdvG,IADc,CACT,kBAAEwG,SAAF,MAAEA,QAAF,OAAgBA,UAASF,MAAT,CAAiBC,KAAjB,CAAhB,EADS,CAAX,EADR,EAGD,CALD,EAMD,C","file":"static/js/0.0fdb9185.chunk.js","sourcesContent":["// модификаторы объектов и менеджеров данных\r\n\r\n// // модификаторы справочников\r\n// import catalogs from './catalogs';\r\n//\r\n// // модификаторы документов\r\n// import documents from './documents';\r\n//\r\n// модификаторы планов видов характеристик\r\nimport chartscharacteristics from './chartscharacteristics';\r\n//\r\n// модификаторы отчетов\r\nimport reports from './reports';\r\n//\r\n// модификаторы обработок\r\nimport dataprocessors from './dataprocessors';\r\n//\r\n// общие модули\r\nimport common from './common/index';\r\n\r\n// обработчик экспорта в dxf\r\nimport export_dxf from '../openjscad/export_dxf';\r\n\r\nexport default function ($p) {\r\n  // catalogs($p);\r\n  // documents($p);\r\n  chartscharacteristics($p);\r\n  reports($p);\r\n  dataprocessors($p);\r\n  common($p);\r\n  export_dxf($p);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/modifiers.js\n// module id = 1130\n// module chunks = 0","import ReactDOM from 'react-dom';\n\nimport Portalv4 from './Portal';\nimport LegacyPortal from './LegacyPortal';\n\nvar Portal = void 0;\n\nif (ReactDOM.createPortal) {\n  Portal = Portalv4;\n} else {\n  Portal = LegacyPortal;\n}\n\nexport default Portal;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-portal/es/PortalCompat.js\n// module id = 1139\n// module chunks = 0","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport const disableSelect = {\n  userSelect: 'none',\n  WebkitUserSelect: 'none',\n  msUserSelect: 'none',\n  MozUserSelect: 'none',\n  OUserSelect: 'none'\n};\n\nexport const defaultTheme = {\n  title: {\n    userSelect: 'none',\n    WebkitUserSelect: 'none',\n    msUserSelect: 'none',\n    MozUserSelect: 'none',\n    OUserSelect: 'none',\n    overflow: 'hidden',\n    width: '100%',\n    height: 30,\n  },\n  frame: {\n    position: 'absolute',\n    margin: 0,\n    padding: 0,\n    overflow: 'hidden',\n  },\n  transition: 'all 0.25s ease-in-out'\n};\n\nfunction prefixedTransition(transition) {\n  return transition ? {\n    transition: transition,\n    WebkitTransition: transition,\n    msTransition: transition,\n    MozTransition: transition,\n    OTransition: transition,\n  } : {};\n}\n\nexport default class DnR extends React.Component {\n\n  constructor(props) {\n    super(props);\n    const {\n      transition,\n      theme\n    } = this.props;\n    this.cursorX = 0;\n    this.cursorY = 0;\n    this.clicked = null;\n    this.allowTransition = false;\n    this.frameRect = {};\n    this.state = {\n      cursor: 'auto',\n      transition: prefixedTransition(transition ? transition : theme.transition)\n    };\n\n    this.mouseMoveListener = this._onMove.bind(this);\n    this.mouseUpListener = this._onUp.bind(this);\n  }\n\n  componentDidMount() {\n    const {\n      initialWidth,\n      initialHeight,\n      initialTop,\n      initialLeft,\n      attachedTo,\n    } = this.props;\n\n    const boundingBox = this.getFrameRect();\n    this.frameRect.width = initialWidth || boundingBox.width;\n    this.frameRect.height = initialHeight || boundingBox.height;\n    this.frameRect.top = initialTop || this.refs.frame.offsetTop;\n    this.frameRect.left = initialLeft || this.refs.frame.offsetLeft;\n\n    attachedTo.addEventListener('mousemove', this.mouseMoveListener);\n    attachedTo.addEventListener('mouseup', this.mouseUpListener);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if(nextProps.transition !== this.props.transition) {\n      this.setState({transition: prefixedTransition(nextProps.transition)});\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.attachedTo.removeEventListener('mousemove', this.mouseMoveListener);\n    this.props.attachedTo.removeEventListener('mouseup', this.mouseUpListener);\n  }\n\n  transform(state, allowTransition = true, updateHistory = true) {\n    const boundingBox = this.getFrameRect();\n\n    let top = this.refs.frame.offsetTop;\n    let left = this.refs.frame.offsetLeft;\n    let width = boundingBox.width;\n    let height = boundingBox.height;\n\n    if(updateHistory) {\n      this.prevState = {\n        top: top,\n        left: left,\n        width: width,\n        height: height,\n      };\n    }\n\n    if(!state) return;\n\n    this.frameRect.top = typeof state.top === 'number' ? state.top :\n      state.bottom ? (state.bottom - (state.height || height)) : top;\n    this.frameRect.left = typeof state.left === 'number' ? state.left :\n      state.right ? (state.right - (state.width || width)) : left;\n    this.frameRect.width = typeof state.width === 'number' ? state.width :\n      (typeof state.right === 'number' && typeof state.left === 'number') ? state.right - state.left :\n        typeof state.right === 'number' ? state.right - this.frameRect.left : width;\n    this.frameRect.height = typeof state.height === 'number' ? state.height :\n      (typeof state.bottom === 'number' && typeof state.top === 'number') ? state.top - state.bottom :\n        typeof state.bottom === 'number' ? state.bottom - this.frameRect.top : height;\n    this.allowTransition = allowTransition;\n\n    if(this.props.onTransform) {\n      setTimeout(this.props.onTransform.bind(this, this.frameRect, this.prevState));\n    }\n    this.forceUpdate();\n  }\n\n  restore(allowTransition = true) {\n    this.transform(this.prevState, allowTransition);\n  }\n\n  minimize(allowTransition = true) {\n    this.transform({width: 0, height: 0}, allowTransition);\n  }\n\n  maximize(allowTransition = true) {\n    this.transform({top: 0, left: 0, width: this.props.attachedTo.innerWidth, height: this.props.attachedTo.innerHeight}, allowTransition);\n  }\n\n  render() {\n    const {\n      style,\n      contentStyle,\n      contentClassName,\n      titleStyle,\n      theme,\n      minWidth,\n      minHeight,\n      animate,\n      cursorRemap,\n      children,\n      boundary,\n      onMove,\n      onResize\n    } = this.props;\n\n    const pervFrameRect = {...this.frameRect};\n\n    if(this.clicked) {\n      let hits = this.hitEdges;\n      const boundingBox = this.clicked.boundingBox;\n\n      if(hits.top || hits.bottom || hits.left || hits.right) {\n        if(hits.right) this.frameRect.width = Math.max(this.cursorX - boundingBox.left, minWidth) + 'px';\n        if(hits.bottom) this.frameRect.height = Math.max(this.cursorY - boundingBox.top, minHeight) + 'px';\n\n        if(hits.left) {\n          let currentWidth = boundingBox.right - this.cursorX;\n          if(currentWidth > minWidth) {\n            this.frameRect.width = currentWidth;\n            this.frameRect.left = this.clicked.frameLeft + this.cursorX - this.clicked.x;\n          }\n        }\n\n        if(hits.top) {\n          let currentHeight = boundingBox.bottom - this.cursorY;\n          if(currentHeight > minHeight) {\n            this.frameRect.height = currentHeight;\n            this.frameRect.top = this.clicked.frameTop + this.cursorY - this.clicked.y;\n          }\n        }\n      }\n      else if(this.state.cursor === 'move') {\n        this.frameRect.top = this.clicked.frameTop + this.cursorY - this.clicked.y;\n        this.frameRect.left = this.clicked.frameLeft + this.cursorX - this.clicked.x;\n      }\n    }\n\n    if(boundary) {\n      let {\n        top,\n        left,\n        width,\n        height\n      } = this.frameRect;\n      if(typeof boundary.top === 'number' && top < boundary.top) {\n        this.frameRect.top = boundary.top;\n      }\n      if(typeof boundary.bottom === 'number' && top + height > boundary.bottom) {\n        this.frameRect.top = boundary.bottom - height;\n        if(typeof boundary.top === 'number' && this.frameRect.top < boundary.top) {\n          this.frameRect.top = boundary.top;\n          this.frameRect.height = boundary.bottom - boundary.top;\n        }\n      }\n      if(typeof boundary.left === 'number' && left < boundary.left) {\n        this.frameRect.left = boundary.left;\n      }\n      if(typeof boundary.right === 'number' && top + height > boundary.right) {\n        this.frameRect.left = boundary.right - width;\n        if(typeof boundary.left === 'number' && this.frameRect.left < boundary.left) {\n          this.frameRect.left = boundary.left;\n          this.frameRect.width = boundary.right - boundary.left;\n        }\n      }\n    }\n\n    let cursor = this.state.cursor;\n\n    if(cursorRemap) {\n      let res = cursorRemap.call(this, cursor);\n\n      if(res && typeof res === 'string') cursor = res;\n    }\n\n\n    const dnrState = {\n      cursor,\n      clicked: this.clicked,\n      frameRect: this.frameRect,\n      allowTransition: this.allowTransition\n    };\n\n    let titleBar = (\n      <div ref=\"title\"\n           style={{\n             ...theme.title,\n             ...titleStyle,\n             cursor\n           }}>\n        {typeof this.props.titleBar !== 'string' ?\n          React.cloneElement(this.props.titleBar, {dnrState}) : this.props.titleBar}\n      </div>);\n\n    const childrenWithProps = React.Children.map(children, function (child) {\n      return typeof child === 'string' ? child : React.cloneElement(child, {dnrState});\n    });\n\n    let frameTransition = (animate && this.allowTransition) ? this.state.transition : {};\n\n    if(onMove && (pervFrameRect.top !== this.frameRect.top ||\n        pervFrameRect.left !== this.frameRect.left)) {\n      setTimeout(onMove.bind(this, this.frameRect, pervFrameRect));\n    }\n\n    if(onResize && (pervFrameRect.width !== this.frameRect.width ||\n        pervFrameRect.height !== this.frameRect.height)) {\n      setTimeout(onResize.bind(this, this.frameRect, pervFrameRect));\n    }\n    return (\n      <div ref=\"frame\"\n           onMouseDownCapture={this._onDown.bind(this)}\n           onMouseMoveCapture={(e) => {\n             if(this.clicked !== null) {\n               e.preventDefault();\n             }\n           }}\n           style={{\n             ...theme.frame,\n             ...frameTransition,\n             cursor: cursor,\n             ...style,\n             ...this.frameRect,\n             ...(this.clicked ? disableSelect : {})\n           }}>\n        {titleBar}\n        <div ref='content'\n             className={contentClassName}\n             style={{position: 'absolute', width: '100%', top: theme.title.height, bottom: 0, ...contentStyle}}>\n          {childrenWithProps}\n        </div>\n      </div>\n    );\n  }\n\n  getChildContext() {\n    return {dnr: this};\n  }\n\n  getFrameRect() {\n    return this.refs.frame.getBoundingClientRect();\n  }\n\n  getDOMFrame() {\n    return this.refs.frame;\n  }\n\n  getTitleRect() {\n    return this.refs.title.getBoundingClientRect();\n  }\n\n  _cursorStatus(e) {\n    const boundingBox = this.getFrameRect();\n    this.cursorX = e.clientX;\n    this.cursorY = e.clientY;\n\n    if(this.clicked) return;\n\n    let hitRange = this.props.edgeDetectionRange;\n    let hitTop = this.cursorY <= boundingBox.top + hitRange;\n    let hitBottom = this.cursorY >= boundingBox.bottom - hitRange;\n    let hitLeft = this.cursorX <= boundingBox.left + hitRange;\n    let hitRight = this.cursorX >= boundingBox.right - hitRange;\n\n    let cursor = 'auto';\n\n    if(hitTop || hitBottom || hitLeft || hitRight) {\n      if(hitRight && hitBottom || hitLeft && hitTop) {\n        cursor = 'nwse-resize';\n      }\n      else if(hitRight && hitTop || hitBottom && hitLeft) {\n        cursor = 'nesw-resize';\n      }\n      else if(hitRight || hitLeft) {\n        cursor = 'ew-resize';\n      }\n      else if(hitBottom || hitTop) {\n        cursor = 'ns-resize';\n      }\n      e.stopPropagation();\n    }\n    else {\n      const titleBounding = this.getTitleRect();\n      if(this.cursorX > titleBounding.left && this.cursorX < titleBounding.right &&\n        this.cursorY > titleBounding.top && this.cursorY < titleBounding.bottom) {\n        cursor = 'move';\n      }\n    }\n\n    this.hitEdges = {\n      top: hitTop,\n      bottom: hitBottom,\n      left: hitLeft,\n      right: hitRight\n    };\n\n    if(cursor !== this.state.cursor) {\n      this.setState({cursor: cursor});\n    }\n\n  }\n\n  _onDown(e) {\n    this.allowTransition = false;\n    this._cursorStatus(e);\n    const boundingBox = this.getFrameRect();\n    this.clicked = {\n      x: e.clientX, y: e.clientY, boundingBox: boundingBox,\n      frameTop: this.refs.frame.offsetTop, frameLeft: this.refs.frame.offsetLeft\n    };\n  }\n\n  _onUp(e) {\n    this.clicked = null;\n    this._cursorStatus(e);\n  }\n\n  _onMove(e) {\n    this._cursorStatus(e);\n    if(this.clicked !== null) {\n      this.forceUpdate();\n    }\n  }\n}\n\nDnR.propTypes = {\n  titleBar: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.string,\n  ]),\n  style: PropTypes.object,\n  contentClassName: PropTypes.object,\n  contentStyle: PropTypes.object,\n  titleStyle: PropTypes.object,\n  theme: PropTypes.object,\n  minWidth: PropTypes.number,\n  minHeight: PropTypes.number,\n  edgeDetectionRange: PropTypes.number,\n  initialWidth: PropTypes.number,\n  initialHeight: PropTypes.number,\n  initialTop: PropTypes.number,\n  initialLeft: PropTypes.number,\n  transition: PropTypes.string,\n  animate: PropTypes.bool,\n  onMove: PropTypes.func,\n  onResize: PropTypes.func,\n  onTransform: PropTypes.func,\n  cursorRemap: PropTypes.func,\n  boundary: PropTypes.object,\n  attachedTo: PropTypes.object,\n};\n\nDnR.defaultProps = {\n  minWidth: 300,\n  minHeight: 200,\n  edgeDetectionRange: 5,\n  theme: defaultTheme,\n  initialWidth: null,\n  initialHeight: null,\n  initialTop: null,\n  initialLeft: null,\n  animate: true,\n  attachedTo: window,\n};\n\nDnR.childContextTypes = {\n  dnr: PropTypes.object\n};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/metadata-react/DnR/DnR.js","// модификаторы планов видов характеристик\r\n\r\n// предопределенные элементы\r\nimport cch_predefined_elmnts from \"./cch_predefined_elmnts\";\r\n\r\n// дополнительные реквизиты и сведения\r\nimport cch_properties from \"./cch_properties\";\r\n\r\nexport default function ($p) {\r\n\tcch_predefined_elmnts($p);\r\n\tcch_properties($p);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/chartscharacteristics/index.js\n// module id = 1142\n// module chunks = 0","/**\r\n * ### Дополнительные методы ПВХ Предопределенные элементы\r\n * Предопределенные элементы - аналог констант для хранения ссылочных и списочных настроек приложения\r\n *\r\n * &copy; Evgeniy Malyarov http://www.oknosoft.ru 2014-2018\r\n * @module cch_predefined_elmnts\r\n */\r\n\r\nexport default function ($p) {\r\n\r\n  const {job_prm, adapters, doc, cch: {predefined_elmnts: _mgr}, utils, md} = $p;\r\n\r\n  // Подписываемся на событие окончания загрузки локальных данных\r\n  adapters.pouch.once('pouch_doc_ram_loaded', () => {\r\n    // читаем элементы из pouchdb и создаём свойства\r\n    _mgr.adapter.find_rows(_mgr, {_raw: true, _top: 500, _skip: 0})\r\n      .then((rows) => {\r\n\r\n        const parents = {};\r\n\r\n        rows.forEach((row) => {\r\n          if(row.is_folder && row.synonym) {\r\n            const ref = row._id.split('|')[1];\r\n            parents[ref] = row.synonym;\r\n            !job_prm[row.synonym] && job_prm.__define(row.synonym, {value: {}});\r\n          }\r\n        });\r\n\r\n        rows.forEach((row) => {\r\n          if(!row.is_folder && row.synonym && parents[row.parent] && !job_prm[parents[row.parent]][row.synonym]) {\r\n\r\n            let _mgr;\r\n\r\n            if(row.type.is_ref) {\r\n              const tnames = row.type.types[0].split('.');\r\n              _mgr = $p[tnames[0]][tnames[1]];\r\n            }\r\n\r\n            if(row.list == -1) {\r\n\r\n              job_prm[parents[row.parent]].__define(row.synonym, {\r\n                value: (() => {\r\n                  const res = {};\r\n                  row.elmnts.forEach((row) => {\r\n                    res[row.elm] = _mgr ? _mgr.get(row.value, false, false) : row.value;\r\n                  });\r\n                  return res;\r\n                })(),\r\n                enumerable: true\r\n              });\r\n\r\n            }\r\n            else if(row.list) {\r\n\r\n              job_prm[parents[row.parent]].__define(row.synonym, {\r\n                value: row.elmnts.map((row) => {\r\n                  if(_mgr) {\r\n                    const value = _mgr.get(row.value, false, false);\r\n                    if(!$p.utils.is_empty_guid(row.elm)) {\r\n                      value._formula = row.elm;\r\n                    }\r\n                    return value;\r\n                  }\r\n                  else {\r\n                    return row.value;\r\n                  }\r\n                }),\r\n                enumerable: true\r\n              });\r\n            }\r\n            else {\r\n\r\n              if(job_prm[parents[row.parent]].hasOwnProperty(row.synonym)) {\r\n                delete job_prm[parents[row.parent]][row.synonym];\r\n              }\r\n\r\n              job_prm[parents[row.parent]].__define(row.synonym, {\r\n                value: _mgr ? _mgr.get(row.value, false, false) : row.value,\r\n                configurable: true,\r\n                enumerable: true\r\n              });\r\n            }\r\n\r\n          }\r\n        });\r\n      })\r\n      .then(() => {\r\n\r\n        // дополним автовычисляемыми свойствами\r\n        const {properties} = job_prm;\r\n        if(properties) {\r\n          const {calculated, width, length} = properties;\r\n          if(width && calculated.indexOf(width) == -1) {\r\n            calculated.push(width);\r\n            width._calculated_value = {execute: (obj) => obj && obj.calc_order_row && obj.calc_order_row.width || 0};\r\n          }\r\n          if(length && calculated.indexOf(length) == -1) {\r\n            calculated.push(length);\r\n            length._calculated_value = {execute: (obj) => obj && obj.calc_order_row && obj.calc_order_row.len || 0};\r\n          }\r\n        }\r\n\r\n        // рассчеты, помеченные, как шаблоны, загрузим в память заранее\r\n        doc.calc_order.load_templates && setTimeout(doc.calc_order.load_templates.bind(doc.calc_order), 1000);\r\n\r\n\r\n        // даём возможность завершиться другим обработчикам, подписанным на _pouch_load_data_loaded_\r\n        setTimeout(() => md.emit('predefined_elmnts_inited'), 100);\r\n\r\n      });\r\n\r\n  });\r\n\r\n\r\n  /**\r\n   * Переопределяем геттер значения\r\n   *\r\n   * @property value\r\n   * @override\r\n   * @type {*}\r\n   */\r\n  delete $p.CchPredefined_elmnts.prototype.value;\r\n  $p.CchPredefined_elmnts.prototype.__define({\r\n\r\n    value: {\r\n      get () {\r\n\r\n        const mf = this.type;\r\n        const res = this._obj ? this._obj.value : '';\r\n\r\n        if(this._obj.is_folder) {\r\n          return '';\r\n        }\r\n        if(typeof res == 'object') {\r\n          return res;\r\n        }\r\n        else if(mf.is_ref) {\r\n          if(mf.digits && typeof res === 'number') {\r\n            return res;\r\n          }\r\n          if(mf.hasOwnProperty('str_len') && !utils.is_guid(res)) {\r\n            return res;\r\n          }\r\n          const mgr = md.value_mgr(this._obj, 'value', mf);\r\n          if(mgr) {\r\n            if(utils.is_data_mgr(mgr)) {\r\n              return mgr.get(res, false);\r\n            }\r\n            else {\r\n              return utils.fetch_type(res, mgr);\r\n            }\r\n          }\r\n          if(res) {\r\n            $p.record_log(['value', mf, this._obj]);\r\n            return null;\r\n          }\r\n        }\r\n        else if(mf.date_part) {\r\n          return utils.fix_date(this._obj.value, true);\r\n        }\r\n        else if(mf.digits) {\r\n          return utils.fix_number(this._obj.value, !mf.hasOwnProperty('str_len'));\r\n        }\r\n        else if(mf.types[0] == 'boolean') {\r\n          return utils.fix_boolean(this._obj.value);\r\n        }\r\n        else {\r\n          return this._obj.value || '';\r\n        }\r\n\r\n        return this.characteristic.clr;\r\n      },\r\n\r\n      set(v) {\r\n\r\n        if(this._obj.value === v) {\r\n          return;\r\n        }\r\n\r\n        _mgr.emit_async('update', this, {value: this._obj.value});\r\n        this._obj.value = v.valueOf();\r\n        this._data._modified = true;\r\n      }\r\n    }\r\n  });\r\n\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/chartscharacteristics/cch_predefined_elmnts.js\n// module id = 1143\n// module chunks = 0","/**\r\n * ### Дополнительные методы плана видов характеристик _Свойства объектов_\r\n * аналог подсистемы _Свойства_ БСП\r\n *\r\n * @module cch_properties\r\n */\r\n\r\nexport default function ($p) {\r\n\r\n  $p.cch.properties.__define({\r\n\r\n    /**\r\n     * ### Проверяет заполненность обязательных полей\r\n     *\r\n     * @method check_mandatory\r\n     * @override\r\n     * @param prms {Array}\r\n     * @param title {String}\r\n     * @return {Boolean}\r\n     */\r\n    check_mandatory: {\r\n      value(prms, title) {\r\n\r\n        var t, row;\r\n\r\n        // проверяем заполненность полей\r\n        for (t in prms) {\r\n          row = prms[t];\r\n          if(row.param.mandatory && (!row.value || row.value.empty())) {\r\n            $p.msg.show_msg({\r\n              type: 'alert-error',\r\n              text: $p.msg.bld_empty_param + row.param.presentation,\r\n              title: title || $p.msg.bld_title\r\n            });\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * ### Возвращает массив доступных для данного свойства значений\r\n     *\r\n     * @method slist\r\n     * @override\r\n     * @param prop {CatObj} - планвидовхарактеристик ссылка или объект\r\n     * @param ret_mgr {Object} - установить в этом объекте указатель на менеджера объекта\r\n     * @return {Array}\r\n     */\r\n    slist: {\r\n      value(prop, ret_mgr) {\r\n\r\n        var res = [], rt, at, pmgr, op = this.get(prop);\r\n\r\n        if(op && op.type.is_ref) {\r\n          // параметры получаем из локального кеша\r\n          for (rt in op.type.types)\r\n            if(op.type.types[rt].indexOf('.') > -1) {\r\n              at = op.type.types[rt].split('.');\r\n              pmgr = $p[at[0]][at[1]];\r\n              if(pmgr) {\r\n\r\n                if(ret_mgr) {\r\n                  ret_mgr.mgr = pmgr;\r\n                }\r\n\r\n                if(pmgr.class_name == 'enm.open_directions') {\r\n                  pmgr.get_option_list().forEach((v) => v.value && v.value != $p.enm.tso.folding && res.push(v));\r\n                }\r\n                else if(pmgr.class_name.indexOf('enm.') != -1 || !pmgr.metadata().has_owners) {\r\n                  res = pmgr.get_option_list();\r\n                }\r\n                else {\r\n                  pmgr.find_rows({owner: prop}, (v) => res.push({value: v.ref, text: v.presentation}));\r\n                }\r\n              }\r\n            }\r\n        }\r\n        return res;\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  $p.CchProperties.prototype.__define({\r\n\r\n    /**\r\n     * ### Является ли значение параметра вычисляемым\r\n     *\r\n     * @property is_calculated\r\n     * @type Boolean\r\n     */\r\n    is_calculated: {\r\n      get() {\r\n        return ($p.job_prm.properties.calculated || []).indexOf(this) != -1;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * ### Рассчитывает значение вычисляемого параметра\r\n     * @param obj {Object}\r\n     * @param [obj.row]\r\n     * @param [obj.elm]\r\n     * @param [obj.ox]\r\n     */\r\n    calculated_value: {\r\n      value(obj) {\r\n        if(!this._calculated_value) {\r\n          if(this._formula) {\r\n            this._calculated_value = $p.cat.formulas.get(this._formula);\r\n          }\r\n          else {\r\n            return;\r\n          }\r\n        }\r\n        return this._calculated_value.execute(obj);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * ### Проверяет условие в строке отбора\r\n     */\r\n    check_condition: {\r\n      value({row_spec, prm_row, elm, cnstr, origin, ox, calc_order}) {\r\n\r\n        const {is_calculated} = this;\r\n        const {utils, enm: {comparison_types}} = $p;\r\n\r\n        // значение параметра\r\n        const val = is_calculated ? this.calculated_value({\r\n          row: row_spec,\r\n          cnstr: cnstr || 0,\r\n          elm,\r\n          ox,\r\n          calc_order\r\n        }) : this.extract_value(prm_row);\r\n\r\n        let ok = false;\r\n\r\n        // если сравнение на равенство - решаем в лоб, если вычисляемый параметр типа массив - выясняем вхождение значения в параметр\r\n        if(ox && !Array.isArray(val) && (prm_row.comparison_type.empty() || prm_row.comparison_type == comparison_types.eq)) {\r\n          if(is_calculated) {\r\n            ok = val == prm_row.value;\r\n          }\r\n          else {\r\n            ox.params.find_rows({\r\n              cnstr: cnstr || 0,\r\n              inset: (typeof origin !== 'number' && origin) || utils.blank.guid,\r\n              param: this,\r\n              value: val\r\n            }, () => {\r\n              ok = true;\r\n              return false;\r\n            });\r\n          }\r\n        }\r\n        // вычисляемый параметр - его значение уже рассчитано формулой (val) - сравниваем со значением в строке ограничений\r\n        else if(is_calculated) {\r\n          const value = this.extract_value(prm_row);\r\n          ok = utils.check_compare(val, value, prm_row.comparison_type, comparison_types);\r\n        }\r\n        // параметр явно указан в табчасти параметров изделия\r\n        else {\r\n          ox.params.find_rows({\r\n            cnstr: cnstr || 0,\r\n            inset: (typeof origin !== 'number' && origin) || utils.blank.guid,\r\n            param: this\r\n          }, ({value}) => {\r\n            // value - значение из строки параметра текущей продукции, val - знаяение из параметров отбора\r\n            ok = utils.check_compare(value, val, prm_row.comparison_type, comparison_types);\r\n            return false;\r\n          });\r\n        }\r\n        return ok;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Извлекает значение параметра с учетом вычисляемости\r\n     */\r\n    extract_value: {\r\n      value({comparison_type, txt_row, value}) {\r\n\r\n        switch (comparison_type) {\r\n\r\n        case $p.enm.comparison_types.in:\r\n        case $p.enm.comparison_types.nin:\r\n\r\n          if(!txt_row) {\r\n            return value;\r\n          }\r\n          try {\r\n            const arr = JSON.parse(txt_row);\r\n            const {types} = this.type;\r\n            if(types && types.length == 1) {\r\n              const mgr = $p.md.mgr_by_class_name(types[0]);\r\n              return arr.map((ref) => mgr.get(ref, false));\r\n            }\r\n            return arr;\r\n          }\r\n          catch (err) {\r\n            return value;\r\n          }\r\n\r\n        default:\r\n          return value;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Возвращает массив связей текущего параметра\r\n     */\r\n    params_links: {\r\n      value(attr) {\r\n\r\n        // первым делом, выясняем, есть ли ограничитель на текущий параметр\r\n        if(!this.hasOwnProperty('_params_links')) {\r\n          this._params_links = $p.cat.params_links.find_rows({slave: this});\r\n        }\r\n\r\n        return this._params_links.filter((link) => {\r\n          let ok = true;\r\n          // для всех записей ключа параметров\r\n          link.master.params.forEach((row) => {\r\n            // выполнение условия рассчитывает объект CchProperties\r\n            ok = row.property.check_condition({\r\n              cnstr: attr.grid.selection.cnstr,\r\n              ox: attr.obj._owner._owner,\r\n              prm_row: row,\r\n              elm: attr.obj,\r\n            });\r\n            if(!ok) {\r\n              return false;\r\n            }\r\n          });\r\n          return ok;\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Проверяет и при необходимости перезаполняет или устанваливает умолчание value в prow\r\n     */\r\n    linked_values: {\r\n      value(links, prow) {\r\n        const values = [];\r\n        let changed;\r\n        // собираем все доступные значения в одном массиве\r\n        links.forEach((link) => link.values.forEach((row) => values.push(row)));\r\n        // если значение доступно в списке - спокойно уходим\r\n        if(values.some((row) => row._obj.value == prow.value)) {\r\n          return;\r\n        }\r\n        // если есть явный default - устанавливаем\r\n        if(values.some((row) => {\r\n            if(row.forcibly) {\r\n              prow.value = row._obj.value;\r\n              return true;\r\n            }\r\n            if(row.by_default && (!prow.value || prow.value.empty && prow.value.empty())) {\r\n              prow.value = row._obj.value;\r\n              changed = true;\r\n            }\r\n          })) {\r\n          return true;\r\n        }\r\n        // если не нашли лучшего, установим первый попавшийся\r\n        if(changed) {\r\n          return true;\r\n        }\r\n        if(values.length) {\r\n          prow.value = values[0]._obj.value;\r\n          return true;\r\n        }\r\n      }\r\n    },\r\n\r\n    /**\r\n     * ### Дополняет отбор фильтром по параметрам выбора\r\n     * Используется в полях ввода экранных форм\r\n     * @param filter {Object} - дополняемый фильтр\r\n     * @param attr {Object} - атрибуты OCombo\r\n     */\r\n    filter_params_links: {\r\n      value(filter, attr, links) {\r\n        // для всех отфильтрованных связей параметров\r\n        if(!links) {\r\n          links = this.params_links(attr);\r\n        }\r\n        links.forEach((link) => {\r\n          // если ключ найден в параметрах, добавляем фильтр\r\n          if(!filter.ref) {\r\n            filter.ref = {in: []};\r\n          }\r\n          if(filter.ref.in) {\r\n            link.values._obj.forEach((row) => {\r\n              if(filter.ref.in.indexOf(row.value) == -1) {\r\n                filter.ref.in.push(row.value);\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/chartscharacteristics/cch_properties.js\n// module id = 1144\n// module chunks = 0","// модификаторы отчетов\r\n\r\n// движение денег\r\nimport materials_demand from \"./materials_demand\";\r\n\r\nexport default function ($p) {\r\n  materials_demand($p);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/reports/index.js\n// module id = 1145\n// module chunks = 0","/**\r\n * ### Отчет _Потребность в материалах_\r\n * он же - анализ спецификации прдукций\r\n *\r\n * Created 07.11.2016\r\n */\r\n\r\nimport RepParams from '../../components/RepMaterialsDemand/RepParams';\r\nimport Report from '../../components/RepMaterialsDemand/Report';\r\n\r\nexport default function ($p) {\r\n\r\n  const {characteristics} = $p.cat;\r\n\r\n  /**\r\n   * Класс-компонент формы отчета\r\n   * в отчете materials_demand используется типовая форма\r\n   */\r\n  $p.rep.materials_demand.FrmObj = Report;\r\n\r\n  /**\r\n   * Класс-компонент панели параметров отчета\r\n   * @type {RepParams}\r\n   */\r\n  $p.rep.materials_demand.RepParams = RepParams;\r\n\r\n  /**\r\n   * Имя табчасти, в которой живут данные отчета\r\n   */\r\n  $p.rep.materials_demand._tabular = 'specification';\r\n\r\n  Object.defineProperties($p.RepMaterials_demand.prototype, {\r\n\r\n    // подмешивает в наименование материала характеристику и размеры\r\n    material: {\r\n      value(row) {\r\n\r\n        const {nom, characteristic, len, width} = row;\r\n\r\n        let res = nom.name;\r\n\r\n        if (!characteristic.empty()) {\r\n          res += ' ' + characteristic.presentation;\r\n        }\r\n\r\n        if (len && width)\r\n          row.sz = (1000 * len).toFixed(0) + \"x\" + (1000 * width).toFixed(0);\r\n        else if (len)\r\n          row.sz = + (1000 * len).toFixed(0);\r\n        else if (width)\r\n          row.sz = + (1000 * width).toFixed(0);\r\n\r\n        row.nom_kind = nom.nom_kind;\r\n        row.grouping = nom.grouping;\r\n        row.article = nom.article;\r\n        row.material = res;\r\n\r\n        return res;\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Рассчитывает данные отчета\r\n     *\r\n     * @method calculate\r\n     * @for RepMaterials_demand\r\n     * @param scheme\r\n     * @return {Promise.<TResult>}\r\n     */\r\n    calculate: {\r\n      value() {\r\n\r\n        const {specification, production, scheme, _manager} = this;\r\n        const arefs = [], aobjs = [],\r\n          spec_flds = Object.keys(characteristics.metadata('specification').fields),\r\n          rspec_flds = Object.keys(_manager.metadata('specification').fields);\r\n\r\n        // получаем массив объектов продукций\r\n        production.forEach((row) => {\r\n          if(!row.characteristic.empty() && row.characteristic.is_new() && arefs.indexOf(row.characteristic.ref) == -1) {\r\n            arefs.push(row.characteristic.ref);\r\n            aobjs.push(row.characteristic.load());\r\n          }\r\n        });\r\n\r\n        // чистим таблицу результата\r\n        specification.clear();\r\n        if(!specification._rows) {\r\n          specification._rows = [];\r\n        }\r\n        else {\r\n          specification._rows.length = 0;\r\n        }\r\n\r\n        return Promise.all(aobjs)\r\n\r\n        // получаем массив объектов заказов и вложенных характеристик\r\n          .then(() => {\r\n\r\n            arefs.length = 0;\r\n            aobjs.length = 0;\r\n\r\n            production.each((row) => {\r\n\r\n              if(!row.characteristic.empty() && !row.characteristic.calc_order.empty()\r\n                && row.characteristic.calc_order.is_new() && arefs.indexOf(row.characteristic.calc_order.ref) == -1) {\r\n                arefs.push(row.characteristic.calc_order.ref);\r\n                aobjs.push(row.characteristic.calc_order.load());\r\n              }\r\n\r\n              row.characteristic.specification.each(function (sprow) {\r\n                if(!sprow.characteristic.empty() && sprow.characteristic.is_new() && arefs.indexOf(sprow.characteristic.ref) == -1) {\r\n                  arefs.push(sprow.characteristic.ref);\r\n                  aobjs.push(sprow.characteristic.load());\r\n                }\r\n              });\r\n\r\n            });\r\n\r\n            return Promise.all(aobjs);\r\n\r\n          })\r\n\r\n          .then(() => {\r\n\r\n            const prows = {};\r\n\r\n            // бежим по продукции и заполняем результат\r\n            production.each((row) => {\r\n              if(!row.characteristic.empty()) {\r\n                row.characteristic.specification.each((sprow) => {\r\n                  let resrow = {};\r\n                  spec_flds.forEach(fld => {\r\n                    if(rspec_flds.indexOf(fld) != -1) {\r\n                      resrow[fld] = sprow[fld];\r\n                    }\r\n                  });\r\n                  resrow = specification.add(resrow);\r\n\r\n                  // учтём количество\r\n                  resrow.qty = resrow.qty * row.qty;\r\n                  resrow.totqty = resrow.totqty * row.qty;\r\n                  resrow.totqty1 = resrow.totqty1 * row.qty;\r\n                  resrow.amount = resrow.amount * row.qty;\r\n                  resrow.amount_marged = resrow.amount_marged * row.qty;\r\n\r\n                  // рассчитаем недостающие поля\r\n\r\n                  // если номер элемента < 0, интерпретируем его, как номер конструкции\r\n                  if(resrow.elm > 0) {\r\n                    resrow.cnstr = row.characteristic.coordinates.find_rows({elm: resrow.elm})[0].cnstr;\r\n                  }\r\n                  else if(resrow.elm < 0) {\r\n                    resrow.cnstr = -resrow.elm;\r\n                  }\r\n\r\n                  // ссылка на заказ\r\n                  resrow.calc_order = row.characteristic;\r\n\r\n                  // номер строки изделия в исходном заказе\r\n                  if(!prows[row.characteristic.ref]) {\r\n                    prows[row.characteristic.ref] = row.characteristic.calc_order.production.find_rows({characteristic: row.characteristic});\r\n                    if(prows[row.characteristic.ref].length) {\r\n                      prows[row.characteristic.ref] = prows[row.characteristic.ref][0].row;\r\n                    }\r\n                    else {\r\n                      prows[row.characteristic.ref] = 1;\r\n                    }\r\n                  }\r\n                  resrow.product = prows[row.characteristic.ref];\r\n\r\n                  // свойства номенклатуры и группировки\r\n                  this.material(resrow);\r\n\r\n                });\r\n              }\r\n            });\r\n\r\n            // фильтруем результат с учетом разыменования и видов сравнения\r\n            scheme.filter(specification, '', true);\r\n\r\n            // группируем по схеме - сворачиваем результат и сохраняем его в ._rows\r\n            scheme.group_by(specification);\r\n\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * Дополняет табчасть продукциями выбранного заказа\r\n     * @param row\r\n     * @return {Promise.<TResult>}\r\n     */\r\n    fill_by_order: {\r\n      value(row) {\r\n\r\n        let pdoc;\r\n\r\n        if(!row || !row._id) {\r\n          if(this.calc_order.empty()) {\r\n            return;\r\n          }\r\n          if(this.calc_order.is_new()) {\r\n            pdoc = this.calc_order.load();\r\n          }\r\n          else {\r\n            pdoc = Promise.resolve(this.calc_order);\r\n          }\r\n        }\r\n        else {\r\n          const ids = row._id.split('|');\r\n          if(ids.length < 2) {\r\n            return;\r\n          }\r\n          pdoc = $p.doc.calc_order.get(ids[1], 'promise');\r\n        }\r\n\r\n        return pdoc\r\n          .then((doc) => {\r\n            //this.production.clear()\r\n            const rows = [];\r\n            const refs = [];\r\n            doc.production.forEach((row) => {\r\n              if(!row.characteristic.empty()) {\r\n                rows.push({\r\n                  use: true,\r\n                  characteristic: row.characteristic,\r\n                  qty: row.quantity,\r\n                });\r\n                if(row.characteristic.is_new()) {\r\n                  refs.push(row.characteristic.ref);\r\n                }\r\n              }\r\n            });\r\n\r\n            return $p.adapters.pouch.load_array($p.cat.characteristics, refs).then(() => rows);\r\n          })\r\n          .then((rows) => {\r\n            this.production.load(rows);\r\n            return rows;\r\n          });\r\n      }\r\n    },\r\n\r\n    // ресурсы по умолчанию\r\n    // TODO: сделать признак в метаданных\r\n    resources: {\r\n      get() {\r\n        return ['qty', 'totqty', 'totqty1', 'amount', 'amount_marged'];\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/reports/materials_demand.js\n// module id = 1146\n// module chunks = 0","/**\r\n * Индивидуальная форма настроек отчета\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Toolbar from 'material-ui/Toolbar';\r\nimport IconButton from 'material-ui/IconButton';\r\nimport AddIcon from '@material-ui/icons/AddCircleOutline';\r\nimport RemoveIcon from '@material-ui/icons/Delete';\r\nimport TabularSection from 'metadata-react/TabularSection';\r\nimport SelectOrder from './SelectOrder';\r\n\r\nimport withStyles from 'metadata-react/Header/toolbar';\r\n\r\nclass SettingsToolbar extends Component {\r\n\r\n  static propTypes = {\r\n    handleAdd: PropTypes.func,             // обработчик добавления объекта\r\n    handleRemove: PropTypes.func,          // обработчик удаления строки\r\n    handleCustom: PropTypes.func,\r\n    classes: PropTypes.object.isRequired,\r\n  };\r\n\r\n  render() {\r\n\r\n    const {handleAdd, handleRemove, handleCustom, classes} = this.props;\r\n\r\n    return (\r\n\r\n      <Toolbar disableGutters className={classes.bar}>\r\n        <IconButton title=\"Добавить строку\" onClick={handleAdd}><AddIcon/></IconButton>\r\n        <IconButton title=\"Удалить строку\" onClick={handleRemove}><RemoveIcon/></IconButton>\r\n        <IconButton key=\"sep1\" disabled>|</IconButton>\r\n        <SelectOrder handleSelect={handleCustom}/>\r\n      </Toolbar>\r\n    );\r\n  }\r\n}\r\n\r\nconst StyledToolbar = withStyles(SettingsToolbar);\r\n\r\nexport default class RepParams extends Component {\r\n\r\n  static propTypes = {\r\n    handleAdd: PropTypes.func,             // обработчик добавления объекта\r\n    handleRemove: PropTypes.func,          // обработчик удаления строки\r\n    _obj: PropTypes.object.isRequired,\r\n  };\r\n\r\n  handleCustom = (row) => {\r\n    this.props._obj.fill_by_order(row)\r\n      .then(() => {\r\n        this.production.forceUpdate();\r\n      });\r\n  };\r\n\r\n  render() {\r\n\r\n    const {handleAdd, handleRemove, _obj} = this.props;\r\n\r\n    return (\r\n\r\n      <TabularSection\r\n        _obj={_obj}\r\n        _tabular=\"production\"\r\n        ref={(el) => this.production = el}\r\n        minHeight={308}\r\n        Toolbar={StyledToolbar}\r\n        handleAdd={handleAdd}\r\n        handleRemove={handleRemove}\r\n        handleCustom={this.handleCustom}\r\n      />\r\n    );\r\n  }\r\n\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RepMaterialsDemand/RepParams.js","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport IconButton from 'material-ui/IconButton';\r\nimport IconWork from '@material-ui/icons/Work';\r\nimport DnR from 'metadata-react/DnR/Dialog';\r\nimport DataList from 'metadata-react/DataList';\r\n\r\nexport default class SelectOrder extends Component {\r\n\r\n  static propTypes = {\r\n    handleSelect: PropTypes.func.isRequired,\r\n  };\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {open: false};\r\n  }\r\n\r\n  handleTouchTap = (event) => {\r\n    // This prevents ghost click.\r\n    event.preventDefault();\r\n\r\n    this.setState({open: true});\r\n  };\r\n\r\n  handleRequestClose = () => {\r\n    this.setState({open: false});\r\n  };\r\n\r\n  handleSelect = (row, _mgr) => {\r\n    this.handleRequestClose();\r\n    this.props.handleSelect(row, _mgr);\r\n  };\r\n\r\n\r\n  render() {\r\n\r\n    const {handleSelect, handleRequestClose, props, state} = this;\r\n\r\n    return (\r\n      <div>\r\n        <IconButton title=\"Заполнить по заказу\" onClick={this.handleTouchTap}>\r\n          <IconWork/>\r\n        </IconButton>\r\n        {state.open && <DnR title=\"Заполнить по заказу\" onClose={handleRequestClose}>\r\n          <DataList\r\n            _mgr={$p.doc.calc_order}\r\n            _acl={props._acl}\r\n            handlers={{handleSelect}}\r\n            selectionMode\r\n            denyAddDel\r\n            //show_variants\r\n            show_search\r\n          />\r\n        </DnR>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RepMaterialsDemand/SelectOrder.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _createSvgIcon = require('./utils/createSvgIcon');\n\nvar _createSvgIcon2 = _interopRequireDefault(_createSvgIcon);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = (0, _createSvgIcon2.default)(_react2.default.createElement(\n  'g',\n  null,\n  _react2.default.createElement('path', { d: 'M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z' })\n), 'Work');\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@material-ui/icons/Work.js\n// module id = 1149\n// module chunks = 0","/**\n *\n *\n * @module Dialog\n *\n * Created by Evgeniy Malyarov on 12.09.2017.\n */\nimport React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\nimport {Portal} from 'react-portal';\nimport DnR from './DnR';\nimport {WindowsTheme} from './themes';\n\nconst paneStyle = {\n  width: '60%',\n  height: '60%',\n  top: '25%',\n  left: '10%',\n  backgroundColor: 'white',\n  border: '1px solid #e0e0e0'\n};\n\nexport default class Dialog extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n    this.state = {\n      minimize: false\n    };\n    this.Windows = WindowsTheme({\n      title: props.title || 'React DnR',\n      onClose: this.onClose.bind(this),\n      onMinimize: ()=>this._dnr.restore(),\n      onMaximize: ()=>this._dnr.maximize(),\n    });\n  }\n\n  onClose() {\n\n    const {_dnr, props} = this;\n    if(_dnr.state.cursor && _dnr.state.cursor.indexOf('resize') == -1){\n      _dnr.minimize();\n      props.onClose && setTimeout(props.onClose, 200);\n    }\n  }\n\n  render() {\n    const {children, ...others} = this.props;\n    return <Portal isOpened>\n      <DnR\n        ref={(el) => this._dnr = el}\n        {...this.Windows}\n        cursorRemap={(c) => c === 'move' ? 'default' : null}\n        style={paneStyle}\n        contentStyle={{overflow: 'auto'}}\n        {...others}\n      >\n        {children}\n      </DnR>\n    </Portal>\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/metadata-react/DnR/Dialog.js","import Portal from './PortalCompat';\nimport PortalWithState from './PortalWithState';\n\nexport { Portal, PortalWithState };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-portal/es/index.js\n// module id = 1151\n// module chunks = 0","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport { canUseDOM } from './utils';\n\nvar Portal = function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  function Portal() {\n    _classCallCheck(this, Portal);\n\n    return _possibleConstructorReturn(this, (Portal.__proto__ || Object.getPrototypeOf(Portal)).apply(this, arguments));\n  }\n\n  _createClass(Portal, [{\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.defaultNode) {\n        document.body.removeChild(this.defaultNode);\n      }\n      this.defaultNode = null;\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      if (!canUseDOM) {\n        return null;\n      }\n      if (!this.props.node && !this.defaultNode) {\n        this.defaultNode = document.createElement('div');\n        document.body.appendChild(this.defaultNode);\n      }\n      return createPortal(this.props.children, this.props.node || this.defaultNode);\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};\n\nexport default Portal;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-portal/es/Portal.js\n// module id = 1152\n// module chunks = 0","export var canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-portal/es/utils.js\n// module id = 1153\n// module chunks = 0","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n// This file is a fallback for a consumer who is not yet on React 16\n// as createPortal was introduced in React 16\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\n\nvar Portal = function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  function Portal() {\n    _classCallCheck(this, Portal);\n\n    return _possibleConstructorReturn(this, (Portal.__proto__ || Object.getPrototypeOf(Portal)).apply(this, arguments));\n  }\n\n  _createClass(Portal, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.renderPortal();\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(props) {\n      this.renderPortal();\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      ReactDOM.unmountComponentAtNode(this.defaultNode || this.props.node);\n      if (this.defaultNode) {\n        document.body.removeChild(this.defaultNode);\n      }\n      this.defaultNode = null;\n      this.portal = null;\n    }\n  }, {\n    key: 'renderPortal',\n    value: function renderPortal(props) {\n      if (!this.props.node && !this.defaultNode) {\n        this.defaultNode = document.createElement('div');\n        document.body.appendChild(this.defaultNode);\n      }\n\n      var children = this.props.children;\n      // https://gist.github.com/jimfb/d99e0678e9da715ccf6454961ef04d1b\n      if (typeof this.props.children.type === 'function') {\n        children = React.cloneElement(this.props.children);\n      }\n\n      this.portal = ReactDOM.unstable_renderSubtreeIntoContainer(this, children, this.props.node || this.defaultNode);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return null;\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\nexport default Portal;\n\n\nPortal.propTypes = {\n  children: PropTypes.node.isRequired,\n  node: PropTypes.any\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-portal/es/LegacyPortal.js\n// module id = 1154\n// module chunks = 0","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Portal from './PortalCompat';\n\nvar KEYCODES = {\n  ESCAPE: 27\n};\n\nvar PortalWithState = function (_React$Component) {\n  _inherits(PortalWithState, _React$Component);\n\n  function PortalWithState(props) {\n    _classCallCheck(this, PortalWithState);\n\n    var _this = _possibleConstructorReturn(this, (PortalWithState.__proto__ || Object.getPrototypeOf(PortalWithState)).call(this, props));\n\n    _this.portalNode = null;\n    _this.state = { active: !!props.defaultOpen };\n    _this.openPortal = _this.openPortal.bind(_this);\n    _this.closePortal = _this.closePortal.bind(_this);\n    _this.wrapWithPortal = _this.wrapWithPortal.bind(_this);\n    _this.handleOutsideMouseClick = _this.handleOutsideMouseClick.bind(_this);\n    _this.handleKeydown = _this.handleKeydown.bind(_this);\n    return _this;\n  }\n\n  _createClass(PortalWithState, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.props.closeOnEsc) {\n        document.addEventListener('keydown', this.handleKeydown);\n      }\n      if (this.props.closeOnOutsideClick) {\n        document.addEventListener('click', this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.closeOnEsc) {\n        document.removeEventListener('keydown', this.handleKeydown);\n      }\n      if (this.props.closeOnOutsideClick) {\n        document.removeEventListener('click', this.handleOutsideMouseClick);\n      }\n    }\n  }, {\n    key: 'openPortal',\n    value: function openPortal(e) {\n      if (this.state.active) {\n        return;\n      }\n      if (e && e.nativeEvent) {\n        e.nativeEvent.stopImmediatePropagation();\n      }\n      this.setState({ active: true }, this.props.onOpen);\n    }\n  }, {\n    key: 'closePortal',\n    value: function closePortal() {\n      if (!this.state.active) {\n        return;\n      }\n      this.setState({ active: false }, this.props.onClose);\n    }\n  }, {\n    key: 'wrapWithPortal',\n    value: function wrapWithPortal(children) {\n      var _this2 = this;\n\n      if (!this.state.active) {\n        return null;\n      }\n      return React.createElement(\n        Portal,\n        {\n          node: this.props.node,\n          key: 'react-portal',\n          ref: function ref(portalNode) {\n            return _this2.portalNode = portalNode;\n          }\n        },\n        children\n      );\n    }\n  }, {\n    key: 'handleOutsideMouseClick',\n    value: function handleOutsideMouseClick(e) {\n      if (!this.state.active) {\n        return;\n      }\n      var root = this.portalNode.props.node || this.portalNode.defaultNode;\n      if (!root || root.contains(e.target) || e.button && e.button !== 0) {\n        return;\n      }\n      this.closePortal();\n    }\n  }, {\n    key: 'handleKeydown',\n    value: function handleKeydown(e) {\n      if (e.keyCode === KEYCODES.ESCAPE && this.state.active) {\n        this.closePortal();\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.props.children({\n        openPortal: this.openPortal,\n        closePortal: this.closePortal,\n        portal: this.wrapWithPortal,\n        isOpen: this.state.active\n      });\n    }\n  }]);\n\n  return PortalWithState;\n}(React.Component);\n\nPortalWithState.propTypes = {\n  children: PropTypes.func.isRequired,\n  defaultOpen: PropTypes.bool,\n  node: PropTypes.any,\n  openByClickOn: PropTypes.element,\n  closeOnEsc: PropTypes.bool,\n  closeOnOutsideClick: PropTypes.bool,\n  onOpen: PropTypes.func,\n  onClose: PropTypes.func\n};\n\nPortalWithState.defaultProps = {\n  onOpen: function onOpen() {},\n  onClose: function onClose() {}\n};\n\nexport default PortalWithState;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-portal/es/PortalWithState.js\n// module id = 1155\n// module chunks = 0","import React from 'react';\nimport {defaultTheme} from './DnR';\n\nexport class Button extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hover: false,\n      down: false,\n    };\n  }\n\n  render() {\n    const {\n      style,\n      hoverStyle,\n      downStyle,\n      children,\n      cursor,\n      ...other\n    } = this.props;\n\n    const dragging = /resize$/.test(cursor);\n\n    const buttonStyle = {\n      ...style,\n      ...(this.state.hover && !dragging ? hoverStyle : {}),\n      ...(this.state.down && !dragging ? downStyle : {}),\n      cursor\n    };\n\n    return (\n      <button\n        onMouseEnter={() => this.setState({hover: true})}\n        onMouseLeave={() => this.setState({hover: false, down: false})}\n        onMouseDown={() => this.setState({down: true})}\n        onMouseUp={() => this.setState({down: false})}\n        style={buttonStyle}\n        {...other}>\n        {children}\n      </button>);\n  }\n}\n\nexport const TitleBar = ({\n                           children,\n                           buttons,\n                           button1,\n                           button2,\n                           button3,\n                           button1Children,\n                           button2Children,\n                           button3Children,\n                           dnrState\n                         }) =>\n  <div>\n    <div {...buttons}>\n      <Button {...button1} cursor={dnrState.cursor}>\n        {button1Children}\n      </Button>\n      <Button {...button2} cursor={dnrState.cursor}>\n        {button2Children}\n      </Button>\n      <Button {...button3} cursor={dnrState.cursor}>\n        {button3Children}\n      </Button>\n    </div>\n    {children}\n  </div>;\n\nexport let OSXTheme = ({title, onClose, onMinimize, onMaximize}) => {\n  const titleHeight = 25;\n  const buttonRadius = 6;\n  const fontSize = 14;\n  const fontFamily = 'Helvetica, sans-serif';\n\n  const style = {\n    height: titleHeight,\n  };\n\n  const buttonStyle = {\n    padding: 0,\n    margin: 0,\n    marginRight: '4px',\n    width: buttonRadius * 2,\n    height: buttonRadius * 2,\n    borderRadius: buttonRadius,\n    content: '',\n    border: '1px solid rgba(0, 0, 0, 0.2)',\n    outline: 'none',\n  };\n  const buttons = {\n    style: {\n      height: titleHeight,\n      position: 'absolute',\n      float: 'left',\n      margin: '0 8px',\n      display: 'flex',\n      alignItems: 'center'\n    }\n  };\n\n  const closeButton = {\n    style: {\n      ...buttonStyle,\n      backgroundColor: 'rgb(255, 97, 89)',\n    },\n    hoverStyle: {\n      backgroundColor: 'rgb(230, 72, 64)'\n    },\n    downStyle: {\n      backgroundColor: 'rgb(204, 46, 38)'\n    },\n    onClick: onClose\n  };\n  const minimizeButton = {\n    style: {\n      ...buttonStyle,\n      backgroundColor: 'rgb(255, 191, 47)'\n    },\n    hoverStyle: {\n      backgroundColor: 'rgb(230, 166, 22)'\n    },\n    downStyle: {\n      backgroundColor: 'rgb(204, 140, 0)'\n    },\n    onClick: onMinimize\n  };\n  const maximizeButton = {\n    style: {\n      ...buttonStyle,\n      backgroundColor: 'rgb(37, 204, 62)'\n    },\n    hoverStyle: {\n      backgroundColor: 'rgb(12, 179, 37)'\n    },\n    downStyle: {\n      backgroundColor: 'rgb(0, 153, 11)'\n    },\n    onClick: onMaximize\n  };\n  return {\n    theme: {\n      title: {\n        ...defaultTheme.title,\n        borderTopLeftRadius: '5px',\n        borderTopRightRadius: '5px',\n        background: 'linear-gradient(0deg, #d8d8d8, #ececec)',\n        color: 'rgba(0, 0, 0, 0.7)',\n        // fontFamily: fontFamily,\n        // fontSize: fontSize,\n        height: titleHeight,\n      },\n      frame: {\n        ...defaultTheme.frame,\n        borderRadius: '5px',\n      },\n      transition: 'all 0.2s ease-in-out'\n    },\n    titleBar: (<TitleBar\n      style={style}\n      buttons={buttons}\n      button1={closeButton}\n      button2={minimizeButton}\n      button3={maximizeButton}>\n      <div style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        padding: '4px',\n        // alignItems: 'center',\n        // justifyContent: 'center'\n      }}>\n        {title}\n      </div>\n    </TitleBar>),\n  };\n};\n\nexport let WindowsTheme = ({title, onClose, onMinimize, onMaximize, titleBarColor = '#757575'}) => {\n  const titleHeight = 30;\n  const buttonRadius = 6;\n  const fontSize = 14;\n  const fontFamily = 'Roboto, Arial, sans-serif';\n\n  const style = {\n    height: titleHeight,\n  };\n\n  const buttonStyle = {\n    padding: 0,\n    margin: 0,\n    width: titleHeight,\n    height: titleHeight,\n    outline: 'none',\n    border: 'none',\n    textAlign: 'center',\n    color: 'white'\n  };\n\n  const buttons = {\n    style: {\n      height: titleHeight,\n      position: 'absolute',\n      right: 0,\n      margin: 0,\n      display: 'flex',\n      alignItems: 'center',\n      verticalAlign: 'baseline',\n    }\n  };\n\n  const closeButton = {\n    style: {\n      ...buttonStyle,\n      fontSize: '30px',\n      fontWeight: 100,\n      lineHeight: '46px',\n      backgroundColor: titleBarColor,\n    },\n    hoverStyle: {\n      backgroundColor: '#ec6060'\n    },\n    downStyle: {\n      backgroundColor: '#bc4040'\n    },\n    onClick: onClose\n  };\n\n  const minimizeButton = {\n    style: {\n      ...buttonStyle,\n      fontSize: '20px',\n      lineHeight: '32px',\n      backgroundColor: titleBarColor,\n    },\n    hoverStyle: {\n      backgroundColor: 'rgba(0, 0, 0, 0.1)'\n    },\n    downStyle: {\n      backgroundColor: 'rgba(0, 0, 0, 0.2)'\n    },\n    onClick: onMinimize\n  };\n\n  const maximizeButton = {\n    style: {\n      ...buttonStyle,\n      fontSize: '22px',\n      lineHeight: '12px',\n      backgroundColor: titleBarColor\n    },\n    hoverStyle: {\n      backgroundColor: 'rgba(0, 0, 0, 0.1)',\n    },\n    downStyle: {\n      backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    },\n    onClick: onMaximize\n  };\n  return {\n    theme: {\n      title: {\n        ...defaultTheme.title,\n        background: titleBarColor,\n        color: 'white',\n        // fontFamily: fontFamily,\n        // fontSize: fontSize,\n        height: titleHeight,\n      },\n      frame: {\n        ...defaultTheme.frame,\n      },\n      transition: 'all 0.2s ease-in-out'\n    },\n    titleBar: (<TitleBar\n      style={style}\n      buttons={buttons}\n      button1={minimizeButton}\n      button2={maximizeButton}\n      button3={closeButton}\n      button1Children='‒'\n      button2Children='□'\n      button3Children='˟'>\n      <div style={{\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        padding: '4px',\n        // alignItems: 'center',\n        //justifyContent: 'center'\n      }}>\n        {title}\n      </div>\n    </TitleBar>),\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/metadata-react/DnR/themes.js","/**\r\n * Индивидуальная форма отчета\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from 'material-ui/Button';\r\nimport Menu, {MenuItem} from 'material-ui/Menu';\r\nimport FrmReport from 'metadata-react/FrmReport';\r\nimport {withIface} from 'metadata-redux';\r\n\r\nclass RepMaterialsDemand extends Component {\r\n\r\n  static propTypes = {\r\n    _obj: PropTypes.object,\r\n    _mgr: PropTypes.object.isRequired,\r\n    location: PropTypes.object.isRequired,\r\n    handleNavigate: PropTypes.func,\r\n\r\n  };\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    const {_mgr, _obj} = props;\r\n    this._obj = _obj || _mgr.create();\r\n\r\n    this.state = {\r\n      anchorEl: undefined,\r\n      menuOpen: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const {location} = this.props;\r\n    const ref = location && location.search.replace(/\\?/g, '');\r\n    if(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/.test(ref)) {\r\n      this._obj.fill_by_order({_id: `doc.calc_order|${ref}`})\r\n        .then(() => {\r\n          this._report && this._report.forceUpdate();\r\n        })\r\n        .catch(() => {\r\n          return null;\r\n        });\r\n    }\r\n  }\r\n\r\n  calcOrders(first) {\r\n    let res = first ? {} : '';\r\n    this._obj.production.forEach(({characteristic: {calc_order}}) => {\r\n      if(!calc_order.empty()){\r\n        if(first){\r\n          res.ref = calc_order.ref;\r\n          res.state = calc_order.state;\r\n          return false;\r\n        }\r\n        else if(res.indexOf(calc_order.number_doc) == -1){\r\n          if(res){\r\n            res += ', ';\r\n          }\r\n          res += calc_order.number_doc;\r\n        }\r\n      }\r\n    });\r\n    return res;\r\n  }\r\n\r\n  handleMenuOpen = (event) => {\r\n    this.setState({menuOpen: true, anchorEl: event.currentTarget}, () => this._report && this._report.forceUpdate());\r\n  };\r\n\r\n  handleMenuClose = () => {\r\n    this.setState({menuOpen: false}, () => this._report && this._report.forceUpdate());\r\n  };\r\n\r\n  handleList = () => {\r\n    //this.props.handleNavigate(`/${_mgr.class_name}/list${_obj ? '/?ref=' + _obj.ref : ''}`);\r\n    const {ref, state} = this.calcOrders(true);\r\n    if(ref && state){\r\n      this.props.handleNavigate(`/?ref=${ref}&state_filter=${state}`);\r\n    }\r\n    else{\r\n      this.props.handleNavigate(`/`);\r\n    }\r\n  }\r\n\r\n  handleObj = () => {\r\n    const {ref} = this.calcOrders(true);\r\n    this.props.handleNavigate(`/doc.calc_order/${ref || 'list'}`);\r\n  }\r\n\r\n  ToolbarExt = () => {\r\n    const {state} = this;\r\n    const res = this.calcOrders();\r\n\r\n    return [\r\n      <Button key=\"go\" size=\"small\" onClick={this.handleMenuOpen} style={{alignSelf: 'center'}}>{res || 'Перейти'}</Button>,\r\n      <Menu\r\n        key=\"menu\"\r\n        anchorEl={state.anchorEl}\r\n        open={state.menuOpen}\r\n        onClose={this.handleMenuClose}\r\n      >\r\n        <MenuItem onClick={this.handleObj}>В форму заказа</MenuItem>\r\n        <MenuItem onClick={this.handleList}>В форму списка заказов</MenuItem>\r\n      </Menu>\r\n    ];\r\n  };\r\n\r\n  render() {\r\n    const {props, _obj} = this;\r\n    return <FrmReport ref={(el) => this._report = el} {...props} _obj={_obj} ToolbarExt={this.ToolbarExt}/>;\r\n  }\r\n}\r\n\r\nexport default withIface(RepMaterialsDemand);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/RepMaterialsDemand/Report.js","// модификаторы обработок\r\n\r\n// перо рисовалки, испосты и раскладки\r\nimport dp_builder from \"./dp_builder\";\r\n\r\n// отчет цены номенклатуры\r\nimport dp_builder_price from \"./dp_builder_price\";\r\n\r\n// заказ покупателя\r\nimport dp_buyers_order from \"./dp_buyers_order\";\r\n\r\n// форма добавления параметрической продукции\r\nimport form_product_list from \"./dp_buyers_order_form_product_list\";\r\n\r\n\r\nexport default function ($p) {\r\n  dp_builder($p);\r\n  dp_builder_price($p);\r\n  dp_buyers_order($p);\r\n  form_product_list($p);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/dataprocessors/index.js\n// module id = 1158\n// module chunks = 0","/**\r\n * ### Модификаторы обработки _builder_pen_\r\n *\r\n * &copy; Evgeniy Malyarov http://www.oknosoft.ru 2014-2018\r\n *\r\n * Created 13.05.2016\r\n *\r\n * @module dp_builder_pen\r\n */\r\n\r\n/* global paper, $p */\r\n\r\nexport default function ($p) {\r\n\r\n  $p.dp.builder_pen.on({\r\n\r\n    value_change: function (attr, obj) {\r\n      if(attr.field == 'elm_type') {\r\n        obj.inset = paper.project.default_inset({elm_type: obj.elm_type});\r\n        obj.rama_impost = paper.project._dp.sys.inserts([obj.elm_type]);\r\n      }\r\n    },\r\n\r\n  });\r\n\r\n  $p.dp.builder_lay_impost.on({\r\n\r\n    value_change: function (attr, obj) {\r\n      if(attr.field == 'elm_type') {\r\n        obj.inset_by_y = paper.project.default_inset({\r\n          elm_type: obj.elm_type,\r\n          pos: $p.enm.positions.ЦентрГоризонталь\r\n        });\r\n        obj.inset_by_x = paper.project.default_inset({\r\n          elm_type: obj.elm_type,\r\n          pos: $p.enm.positions.ЦентрВертикаль\r\n        });\r\n        obj.rama_impost = paper.project._dp.sys.inserts([obj.elm_type]);\r\n      }\r\n    }\r\n  });\r\n\r\n}\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/dataprocessors/dp_builder.js\n// module id = 1159\n// module chunks = 0","/**\r\n * Контекстный отчет по ценам номенклатуры\r\n *\r\n * @module dp_builder_price\r\n *\r\n * Created by Evgeniy Malyarov on 12.02.2017.\r\n */\r\n\r\nexport default function ($p) {\r\n  // переопределяем форму обработки в качестве отчета по ценам номенклатуры\r\n  $p.DpBuilder_price.prototype.__define({\r\n\r\n    form_obj: {\r\n      value(pwnd) {\r\n\r\n        const {nom, goods, _manager} = this;\r\n\r\n        // форма в модальном диалоге\r\n        const options = {\r\n          name: 'wnd_obj_' + _manager.class_name,\r\n          wnd: {\r\n            top: 80 + Math.random() * 40,\r\n            left: 120 + Math.random() * 80,\r\n            width: 780,\r\n            height: 400,\r\n            modal: true,\r\n            center: false,\r\n            pwnd: pwnd,\r\n            allow_close: true,\r\n            allow_minmax: true,\r\n            caption: `Цены: <b>${nom.name}</b>`\r\n          }\r\n        };\r\n\r\n        const wnd = $p.iface.dat_blank(null, options.wnd);\r\n\r\n        const ts_captions = {\r\n          'fields': ['price_type', 'nom_characteristic', 'date', 'price', 'currency'],\r\n          'headers': 'Тип Цен,Характеристика,Дата,Цена,Валюта',\r\n          'widths': '200,*,150,120,100',\r\n          'min_widths': '150,200,100,100,100',\r\n          'aligns': '',\r\n          'sortings': 'na,na,na,na,na',\r\n          'types': 'ro,ro,dhxCalendar,ro,ro'\r\n        };\r\n\r\n        const {_price} = nom._data;\r\n        if(_price) {\r\n          for(const cref in _price) {\r\n            _price[cref];\r\n            for(const tref in _price[cref]) {\r\n              for(const row of _price[cref][tref]) {\r\n                goods.add({\r\n                  nom_characteristic: cref,\r\n                  price_type: tref,\r\n                  date: row.date,\r\n                  price: row.price,\r\n                  currency: row.currency\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        goods.sort(['price_type', 'nom_characteristic', 'date']);\r\n\r\n        wnd.elmnts.grids.goods = wnd.attachTabular({\r\n          obj: this,\r\n          ts: 'goods',\r\n          pwnd: wnd,\r\n          ts_captions: ts_captions\r\n        });\r\n        wnd.detachToolbar();\r\n\r\n        return Promise.resolve();\r\n      }\r\n    }\r\n  });\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/dataprocessors/dp_builder_price.js\n// module id = 1160\n// module chunks = 0","/**\r\n * ### Модификаторы обработки _Заказ покупателя_\r\n *\r\n * &copy; Evgeniy Malyarov http://www.oknosoft.ru 2014-2018\r\n *\r\n * Created 13.05.2016\r\n *\r\n * @module dp_buyers_order\r\n */\r\n\r\nexport default function ($p) {\r\n\r\n  // переопределяем свойства цвет и система - они будут псевдонимами свойств текущей характеристики\r\n  $p.DpBuyers_order = class DpBuyers_order extends $p.DpBuyers_order {\r\n\r\n    get clr() {\r\n      return this.characteristic.clr;\r\n    }\r\n\r\n    set clr(v) {\r\n      const {characteristic, _data} = this;\r\n      if((!v && characteristic.empty()) || characteristic.clr == v) {\r\n        return;\r\n      }\r\n      this._manager.emit_async('update', this, {clr: characteristic.clr});\r\n      characteristic.clr = v;\r\n      _data._modified = true;\r\n    }\r\n\r\n    get sys() {\r\n      return this.characteristic.sys;\r\n    }\r\n\r\n    set sys(v) {\r\n      const {characteristic, _data} = this;\r\n      if((!v && characteristic.empty()) || characteristic.sys == v) {\r\n        return;\r\n      }\r\n      this._manager.emit_async('update', this, {sys: characteristic.sys});\r\n      characteristic.sys = v;\r\n      _data._modified = true;\r\n    }\r\n\r\n    get extra_fields() {\r\n      return this.characteristic.params;\r\n    }\r\n\r\n    // установим количество по умолчению при добавлении строки\r\n    add_row(row) {\r\n      if(row._owner.name === 'production') {\r\n        row.qty = row.quantity = 1;\r\n      }\r\n    }\r\n\r\n    // TODO пробежать по всем строкам ниже удаляемой и заменить elm в параметрах\r\n    del_row(row) {\r\n      if(row._owner.name === 'production') {\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  // свойства и методы табчасти скидок\r\n  $p.DpBuyers_orderCharges_discountsRow = class DpBuyers_orderCharges_discountsRow extends $p.DpBuyers_orderCharges_discountsRow {\r\n\r\n    // при изменении реквизита\r\n    value_change(field, type, value) {\r\n      if(field == 'discount_percent') {\r\n        const {_owner, nom_kind} = this;\r\n        const {_mode, _calc_order} = _owner._owner;\r\n        _calc_order.production.forEach((row) => {\r\n          if(row.nom.nom_kind == nom_kind) {\r\n            row[_mode] = parseFloat(value || 0);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n  };\r\n\r\n  // свойства и методы табчасти продукции\r\n  $p.DpBuyers_orderProductionRow = class DpBuyers_orderProductionRow extends $p.DpBuyers_orderProductionRow {\r\n\r\n    // при изменении вставки перезаполним параметры\r\n    value_change(field, type, value) {\r\n\r\n      if(field == 'len' || field == 'height') {\r\n        this[field] = value;\r\n        if(this.len != 0 && this.height != 0) {\r\n          this.s = (this.height * this.len / 1000000).round(3);\r\n        }\r\n      }\r\n\r\n      if(field == 'inset') {\r\n        const {_owner, row} = this;\r\n        if(this.inset != value || type === 'force') {\r\n          this.inset = value;\r\n          const {product_params} = _owner._owner;\r\n          const defaults = this.inset.product_params;\r\n          product_params.clear({elm: row});\r\n          this.inset.used_params.forEach((param) => {\r\n            const prow = product_params.add({elm: row, param: param});\r\n\r\n            // подстановка умолчаний для параметра\r\n            defaults.find_rows({param}, (drow) => {\r\n              prow.value = drow.value;\r\n            });\r\n\r\n            // подстановка умолчаний для цвета\r\n            const {pclrs} = $p.DpBuyers_orderProductionRow;\r\n            if(!pclrs.size) {\r\n              const {properties} = $p.job_prm;\r\n              pclrs.add(properties.clr_inset);\r\n              pclrs.add(properties.clr_elm);\r\n              pclrs.add(properties.clr_product);\r\n            }\r\n            defaults.forEach((drow) => {\r\n              if(pclrs.has(drow.param)) {\r\n                this.clr = drow.value;\r\n                return false;\r\n              }\r\n            });\r\n\r\n          });\r\n          this._manager.emit_async('rows', _owner._owner, {product_params: true});\r\n        }\r\n      }\r\n    }\r\n\r\n  };\r\n\r\n  $p.DpBuyers_orderProductionRow.pclrs = new Set();\r\n\r\n  // вызов формы подключаемого react компонента из dhtmlx\r\n  $p.dp.buyers_order.open_component = function (wnd, o, handlers, component, area = 'DataObjPage') {\r\n\r\n    let imodule;\r\n    switch (component){\r\n    case 'ClientOfDealer':\r\n      imodule = import('../../components/ClientOfDealer');\r\n      break;\r\n    case 'ClientOfDealerSearch':\r\n      imodule = import('../../components/ClientOfDealerSearch');\r\n      break;\r\n    case 'PushUtils':\r\n      imodule = import('../../components/PushUtils');\r\n      break;\r\n    case 'CalcOrderAdditions':\r\n      imodule = import('../../components/CalcOrderAdditions');\r\n      break;\r\n    }\r\n    imodule.then((module) => handlers.handleIfaceState({\r\n        component: area,\r\n        name: 'dialog',\r\n        value: {\r\n          ref: o.ref,\r\n          cmd: o.cmd,\r\n          _mgr: o._mgr,\r\n          wnd: wnd,\r\n          Component: module.default\r\n        },\r\n      }));\r\n  };\r\n\r\n}\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/dataprocessors/dp_buyers_order.js\n// module id = 1161\n// module chunks = 0","/**\r\n * ### Форма ДобавитьСписокПродукции\r\n * В этой форме пользователь задаёт размеры и параметры вставок, по которым будет сформирована продукция заказа\r\n *\r\n *\r\n * Created 13.05.2016\r\n *\r\n * @module dp_buyers_order\r\n */\r\n\r\n\r\nexport default function ($p) {\r\n\r\n  class CalcOrderFormProductList {\r\n\r\n    constructor(pwnd, calc_order) {\r\n\r\n      this.dp = $p.dp.buyers_order.create();\r\n      this.dp.calc_order = calc_order;\r\n\r\n      this.attr = {\r\n\r\n        // командная панель формы\r\n        toolbar_struct: $p.injected_data['toolbar_product_list.xml'],\r\n\r\n        // переопределяем обработчики кнопок командной панели формы\r\n        toolbar_click: this.toolbar_click.bind(this),\r\n\r\n        // переопределяем метод отрисовки шапки документа, т.к. мы хотим разместить табчасть на первой странице без закладок\r\n        draw_pg_header: this.draw_pg_header.bind(this),\r\n\r\n        // переопределяем метод отрисовки табличных частей, т.к. мы хотим разместить табчасть на первой странице без закладок\r\n        draw_tabular_sections: this.draw_tabular_sections.bind(this),\r\n\r\n      };\r\n\r\n      this.dp.presentation = calc_order.presentation + ' - добавление продукции';\r\n\r\n      this.dp.form_obj(pwnd, this.attr);\r\n\r\n\r\n    }\r\n\r\n    // навешиваем обработчики событий на элементы управления\r\n    draw_pg_header(dp, wnd) {\r\n      const {production} = wnd.elmnts.grids;\r\n      const refill_prms = this.refill_prms.bind(this);\r\n      production.attachEvent('onRowSelect', refill_prms);\r\n      production.attachEvent('onEditCell', (stage, rId, cInd) => {\r\n        !cInd && setTimeout(refill_prms);\r\n      });\r\n    }\r\n\r\n    // переопределяем страницы формы\r\n    draw_tabular_sections(dp, wnd) {\r\n\r\n      this.wnd = wnd;\r\n      wnd.maximize();\r\n\r\n      const {elmnts} = wnd;\r\n      elmnts.frm_toolbar.hideItem('bs_print');\r\n\r\n      // добавляем layout на первую страницу\r\n      wnd.detachObject(true);\r\n      wnd.maximize();\r\n      elmnts.layout = wnd.attachLayout({\r\n        pattern: '2E',\r\n        cells: [{\r\n          id: 'a',\r\n          text: 'Продукция',\r\n          header: false,\r\n        }, {\r\n          id: 'b',\r\n          text: 'Параметры',\r\n          header: false,\r\n        }],\r\n        offsets: {top: 0, right: 0, bottom: 0, left: 0},\r\n      });\r\n\r\n      // добавляем табчасть продукции\r\n      this.meta_production = $p.dp.buyers_order.metadata('production').fields._clone();\r\n      elmnts.grids.production = elmnts.layout.cells('a').attachTabular({\r\n        metadata: this.meta_production,\r\n        obj: dp,\r\n        ts: 'production',\r\n        pwnd: wnd,\r\n      });\r\n\r\n      // добавляем табчасть пареметров\r\n      elmnts.grids.params = elmnts.layout.cells('b').attachHeadFields({\r\n        obj: dp,\r\n        ts: 'product_params',\r\n        pwnd: wnd,\r\n        selection: {elm: -1},\r\n        oxml: {'Параметры продукции': []},\r\n      });\r\n\r\n      const height = elmnts.layout.cells('a').getHeight() + elmnts.layout.cells('b').getHeight();\r\n      elmnts.layout.cells('a').setHeight(height * 0.7);\r\n\r\n    }\r\n\r\n    // команды формы\r\n    toolbar_click(btn_id) {\r\n      if(btn_id == 'btn_ok') {\r\n        this.dp._data._modified = false;\r\n        this.dp.calc_order.process_add_product_list(this.dp)\r\n          .then(() => {\r\n            this.wnd.close();\r\n            this.wnd = this.dp = this.attr = null;\r\n          })\r\n          .catch(() => null);\r\n      }\r\n    }\r\n\r\n    refill_prms() {\r\n      const {meta_production, wnd} = this;\r\n      const {production, params} = wnd.elmnts.grids;\r\n      if(production && params) {\r\n        const row = production.get_cell_field();\r\n        if(row) {\r\n          params.selection = {elm: row.obj.row};\r\n          if(!row.obj.inset.empty()) {\r\n            $p.cat.clrs.selection_exclude_service(meta_production.clr, row.obj.inset);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  $p.dp.buyers_order.open_product_list = function (wnd, o) {\r\n    return new CalcOrderFormProductList(wnd, o);\r\n  };\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/dataprocessors/dp_buyers_order_form_product_list.js\n// module id = 1188\n// module chunks = 0","// общие модули\r\n\r\n// строки интернационализации\r\nimport i18ru from \"./i18n.ru\";\r\n\r\nexport default function ($p) {\r\n  i18ru($p);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/common/index.js\n// module id = 1189\n// module chunks = 0","/**\r\n * Строковые константы интернационализации\r\n */\r\n\r\nexport default function ($p) {\r\n\r\n  Object.assign($p.msg, {\r\n    main_title: 'Окнософт: заказ дилера ',\r\n    additional_inserts: 'Доп. вставки',\r\n    align_node_right: 'Уравнять вертикально вправо',\r\n    align_node_bottom: 'Уравнять горизонтально вниз',\r\n    align_node_top: 'Уравнять горизонтально вверх',\r\n    align_node_left: 'Уравнять вертикально влево',\r\n    align_set_right: 'Установить размер сдвигом правых элементов',\r\n    align_set_bottom: 'Установить размер сдвигом нижних элементов',\r\n    align_set_top: 'Установить размер сдвигом верхних элементов',\r\n    align_set_left: 'Установить размер сдвигом левых элементов',\r\n    align_all: 'Установить прямые углы или уравнять по заполнениям',\r\n    align_invalid_direction: 'Неприменимо для элемента с данной ориентацией',\r\n\r\n    arc_invalid_elm: 'Укажите профиль на эскизе',\r\n\r\n    bld_constructor: 'Конструктор объектов графического построителя',\r\n    bld_title: 'Графический построитель',\r\n    bld_empty_param: 'Не заполнен обязательный параметр <br />',\r\n    bld_not_product: 'В текущей строке нет изделия построителя',\r\n    bld_not_draw: 'Отсутствует эскиз или не указана система профилей',\r\n    bld_not_sys: 'Не указана система профилей',\r\n    bld_from_blocks_title: 'Выбор типового блока',\r\n    bld_from_blocks: 'Текущее изделие будет заменено конфигурацией типового блока. Продолжить?',\r\n    bld_split_imp: 'В параметрах продукции<br />\\'%1\\'<br />запрещены незамкнутые контуры<br />Для включения деления импостом,' +\r\n    '<br />установите это свойство в \\'Истина\\'',\r\n\r\n    bld_new_stv: 'Добавить створку',\r\n    bld_new_stv_no_filling: 'Перед добавлением створки, укажите заполнение,<br />в которое поместить створку',\r\n    bld_arc: 'Радиус сегмента профиля',\r\n\r\n    del_elm: 'Удалить элемент',\r\n\r\n    err_no_cnn: 'не найдено соединение',\r\n    err_seam_len: 'длина шва',\r\n\r\n    glass_spec: 'Состав заполнения',\r\n    glass_invalid_elm: 'Укажите заполнение на эскизе',\r\n\r\n    to_contour: 'в контур',\r\n    to_elm: 'в элемент',\r\n    to_product: 'в изделие',\r\n\r\n    ruler_elm: 'Расстояние между элементами',\r\n    ruler_node: 'Расстояние между узлами',\r\n    ruler_new_line: 'Добавить размерную линию',\r\n\r\n    ruler_base: 'По опорным линиям',\r\n    ruler_inner: 'По внутренним линиям',\r\n    ruler_outer: 'По внешним линиям',\r\n\r\n    show_not_implemented: function () {\r\n      this.show_msg({\r\n        type: 'alert-warning',\r\n        text: this.not_implemented,\r\n        title: this.main_title\r\n      });\r\n    },\r\n\r\n  });\r\n}\r\n\r\n\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/metadata/common/i18n.ru.js\n// module id = 1190\n// module chunks = 0","/**\r\n * ### Слушатель события экспорта в dxf\r\n * Created by Evgeniy Malyarov on 24.11.2017.\r\n */\r\n\r\nexport default function ($p) {\r\n  $p.md.on('dxf', (scheme) => {\r\n    //import('@jscad/openjscad')\r\n    import('dxf-writer/src/Drawing')\r\n      .then((jscad) => import('./exec_js_dxf')\r\n        .then(({exec_dxf}) => exec_dxf(scheme, jscad)));\r\n  });\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/openjscad/export_dxf.js"],"sourceRoot":""}