{"version":3,"sources":["components/ClientOfDealer/index.js","components/ClientOfDealer/ClientOfDealer.js","components/ClientOfDealer/connect.js","components/ClientOfDealer/styles.js"],"names":["ClientOfDealer","props","context","handleCancel","handleCalck","dialog","ref","cmd","_mgr","bind","obj","by_ref","meta","metadata","form","data","split","fields","Object","keys","fake_obj","_metadata","fld","_manager","__define","get","$p","utils","fetch_type","indexOf","set","v","items","map","item","index","Array","isArray","renderItems","element","row","handleOk","classes","paper","join","propTypes","PropTypes","object","isRequired","handlers","func","connect","mapStateToProps","state","Promise","resolve","handleIfaceState","component","name","value","compose","styles","minWidth","maxHeight","entered","minHeight","secondary","marginTop","theme","spacing","unit","groupTitle","fontWeight","listitem","paddingTop","paddingBottom","withStyles"],"mappings":"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","file":"static/js/10.8faff246.chunk.js","sourcesContent":["import ClientOfDealer from './ClientOfDealer';\r\n\r\nexport default ClientOfDealer;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ClientOfDealer/index.js","/**\r\n * ### Карточка покупателя\r\n * каркас компонента - визуальная глупая часть\r\n *\r\n * Created by Evgeniy Malyarov on 13.11.2017.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from 'material-ui/Button';\r\nimport Dialog from 'metadata-react/App/Dialog';\r\nimport connect from './connect';\r\n\r\nimport {FormGroup} from 'material-ui/Form';\r\nimport DataField from 'metadata-react/DataField';\r\n\r\nclass ClientOfDealer extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    const {handleCancel, handleCalck, dialog: {ref, cmd, _mgr}} = props;\r\n    this.handleCancel = handleCancel.bind(this);\r\n    this.handleCalck = handleCalck.bind(this);\r\n\r\n    this.obj = _mgr.by_ref[ref];\r\n    const meta = this.meta = _mgr.metadata().form[cmd];\r\n    const data = this.data = this.obj[cmd].split('\\u00A0');\r\n\r\n    // виртуальные данные\r\n    const fields = Object.keys(meta.fields);\r\n    this.fake_obj = {\r\n      _metadata(fld) {\r\n        return fld ? meta.fields[fld] : meta;\r\n      },\r\n\r\n      get _manager() {\r\n        return _mgr;\r\n      },\r\n\r\n    };\r\n    for (const fld of fields) {\r\n      this.fake_obj.__define(fld, {\r\n        get() {\r\n          return $p.utils.fetch_type(data[fields.indexOf(fld)], meta.fields[fld]);\r\n        },\r\n        set(v) {\r\n          data[fields.indexOf(fld)] = v;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  handleOk = () => {\r\n    const {data, obj, props: {dialog}} = this;\r\n    obj[dialog.cmd] = data.join('\\u00A0');\r\n    this.handleCancel();\r\n  };\r\n\r\n  renderItems(items) {\r\n    const {fake_obj, meta} = this;\r\n\r\n    return items.map((item, index) => {\r\n\r\n      if(Array.isArray(item)) {\r\n        return this.renderItems(item);\r\n      }\r\n\r\n      if(item.element === 'DataField') {\r\n        return <DataField key={index} _obj={fake_obj} _fld={item.fld} _meta={meta.fields[item.fld]}/>;\r\n      }\r\n\r\n      if(item.element === 'FormGroup') {\r\n        return <FormGroup key={index} row={item.row}>{this.renderItems(item.items)}</FormGroup>;\r\n      }\r\n\r\n      return <div key={index}>Не реализовано в текущей версии</div>;\r\n    });\r\n  }\r\n\r\n  render() {\r\n\r\n    const {handleCancel, handleOk, meta, props: {classes}} = this;\r\n\r\n    return <Dialog\r\n      open\r\n      initFullScreen\r\n      classes={{paper: classes.paper}}\r\n      title=\"Реквизиты клиента\"\r\n      onClose={handleCancel}\r\n      actions={[\r\n        <Button key=\"ok\" onClick={handleOk} color=\"primary\">Записать и закрыть</Button>,\r\n        <Button key=\"cancel\" onClick={handleCancel} color=\"primary\">Закрыть</Button>\r\n      ]}\r\n    >\r\n      {this.renderItems(meta.obj.items)}\r\n    </Dialog>;\r\n\r\n  }\r\n}\r\n\r\nClientOfDealer.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  dialog: PropTypes.object.isRequired,\r\n  handlers: PropTypes.object.isRequired,\r\n  handleCalck: PropTypes.func.isRequired,\r\n  handleCancel: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(ClientOfDealer);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ClientOfDealer/ClientOfDealer.js","/**\r\n * ### Карточка покупателя\r\n * обработчики событий и модификаторы данных\r\n *\r\n * Created by Evgeniy Malyarov on 13.11.2017.\r\n */\r\n\r\nimport {connect} from 'react-redux';\r\nimport withStyles from './styles';\r\nimport compose from 'recompose/compose';\r\n\r\n\r\nfunction mapStateToProps(state, props) {\r\n  return {\r\n    handleCalck() {\r\n      //dp.calc_order.production.sync_grid(props.dialog.wnd.elmnts.grids.production);\r\n      return Promise.resolve();\r\n    },\r\n    handleCancel() {\r\n      props.handlers.handleIfaceState({\r\n        component: 'DataObjPage',\r\n        name: 'dialog',\r\n        value: null,\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\n// function mapDispatchToProps(dispatch) {\r\n//   return {};\r\n// }\r\n\r\nexport default compose(\r\n  withStyles,\r\n  connect(mapStateToProps /*, mapDispatchToProps */),\r\n);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ClientOfDealer/connect.js","/**\r\n * ### Карточка покупателя\r\n * стили оформления\r\n *\r\n * Created by Evgeniy Malyarov on 14.03.2018.\r\n */\r\n\r\nimport {withStyles} from 'material-ui/styles';\r\n\r\nconst styles = theme => ({\r\n  paper: {\r\n    minWidth: 880,\r\n    maxHeight: 'calc(100vh - 80px)',\r\n  },\r\n  entered: {\r\n    minHeight: 120,\r\n  },\r\n  secondary: {\r\n    marginTop: -theme.spacing.unit * 1.5,\r\n  },\r\n  groupTitle: {\r\n    fontWeight: 'bold',\r\n  },\r\n  listitem: {\r\n    paddingTop: theme.spacing.unit,\r\n    paddingBottom: theme.spacing.unit,\r\n  }\r\n});\r\n\r\nexport default withStyles(styles);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/ClientOfDealer/styles.js"],"sourceRoot":""}